import{j as s,r as a,L as u,u as k}from"./index-cc54812f.js";import{a as E}from"./roesc-9645406c.js";import{g as N}from"./fetchData-bbbe6b6a.js";import{p as A,M as x}from"./Markdown-b5a4ca8d.js";import{T as j}from"./Table-538e56a3.js";import{O as f}from"./OutLink-9f4f15fc.js";import{T as g,C as S,M as P}from"./Media-8138ff76.js";import{g as p,f as w}from"./utils-bd46a158.js";import{M as C}from"./MediaSection-1275ea0b.js";import{s as h}from"./showList-162192a9.js";import{U as b}from"./UsersString-b5c6587f.js";import{g as L}from"./broadcasters-9692bac1.js";import"./countryList-2a07b954.js";import"./users-f559a2c7.js";function m({data:r,titleOnly:n}){const e=n?r.title:`${r.artists.join(", ")} - ${r.title}`;return s.jsx("span",{children:s.jsx(f,{to:r.link,children:e})})}function M({ids:r}){const[n,e]=a.useState([]);return a.useEffect(()=>{const i=r.filter(t=>!!t).map(t=>L(t));Promise.all(i).then(t=>{e(t.map((c,o)=>s.jsxs(u,{to:`/broadcasters/${c.link}`,children:[c.name,o===t.length-1?"":", "]},c.id)))})},[r]),n}function B({data:r,roescData:n}){return s.jsx("div",{className:"table-container sideTable",style:{float:"right",marginLeft:"1rem"},children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable",children:[s.jsx("thead",{children:s.jsx("tr",{style:{textAlign:"center"},children:s.jsxs("th",{colSpan:2,children:[n.name," ",r.edition]})})}),s.jsxs("tbody",{children:[p(r.media,"logos").length>0?s.jsx("tr",{children:s.jsx("td",{colSpan:2,children:s.jsx(C,{link:p(r.media,"logos")[0].link})})}):"",s.jsxs("tr",{children:[s.jsx("th",{children:"Presenters"}),s.jsx("td",{children:r.presenters.map((e,i)=>s.jsxs("span",{children:[e.name," ",e.id&&s.jsxs("span",{children:["(",s.jsx(b,{userids:[e.id]}),")"]}),s.jsx("br",{})]},i))})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Broadcaster"}),s.jsx("td",{children:s.jsx(M,{ids:r.broadcasters})})]}),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Dates"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:h[e.id]}),s.jsx("td",{children:A(e.date)})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Opening Acts"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:h[e.id]}),s.jsx("td",{children:e.openings.map((i,t)=>s.jsxs("div",{children:[s.jsx(m,{data:i}),s.jsx("br",{})]},t))})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Interval Acts"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:h[e.id]}),s.jsx("td",{children:e.intervals.map((i,t)=>s.jsxs("div",{children:[s.jsx(m,{data:i}),s.jsx("br",{})]},t))})]},e.id))]})]})})}function D(r,n){const e=[];return r.entries.forEach(i=>{const t=i.shows.find(c=>c.id===n);if(t){let c="";t.qualified&&(c="selected"),n==="gf"&&(console.log(t),t.place===1?c="firstplace":t.place===2?c="secondplace":t.place===3&&(c="thirdplace")),e.push({ro:t.order,country:i.country,participant:i.hods,song:i.song,place:t.place,points:t.points.total,qualified:t.qualified,className:c})}}),e.sort((i,t)=>i.ro-t.ro),e}function $({show:r,data:n}){return s.jsx(g,{children:s.jsx("div",{className:"my-5",children:s.jsx(j,{columns:["Order","Country","Participant","Artist","Song","Place","Points"],smallFirst:!0,compact:!0,children:D(n,r).map((e,i)=>s.jsxs("tr",{className:e.className,children:[s.jsx("td",{style:{textAlign:"center"},children:w(e.ro)}),s.jsx("td",{children:s.jsx(S,{id:e.country})}),s.jsx("td",{children:s.jsx(b,{userids:e.participant})}),s.jsx("td",{children:e.song.artists}),s.jsx("td",{children:s.jsx(m,{data:e.song,titleOnly:!0})}),s.jsx("td",{children:e.place}),s.jsx("td",{children:e.points})]},i))})})})}function O({data:r,show:n}){return s.jsxs("div",{children:[s.jsx("h2",{children:h[n.id]}),s.jsx(x,{value:n.textContent}),s.jsx($,{data:r,show:n.id})]})}function X(){const{roesc:r,edition:n}=k(),[e,i]=a.useState(),[t,c]=a.useState(),[o,v]=a.useState("");return a.useEffect(()=>{E(r,n).then(l=>i(l)).catch(l=>v(l)),N(r).then(l=>c(l)).catch(()=>{})},[r,n]),!e||!t?s.jsx("h1",{children:"Loading..."}):o?s.jsxs("h1",{children:["Error: ",o]}):s.jsxs("div",{children:[s.jsx("h1",{children:e.fullName}),s.jsx("hr",{}),s.jsx(B,{data:e,roescData:t}),s.jsx(x,{value:e.textContent}),s.jsx("h1",{children:"Location"}),s.jsx("hr",{}),s.jsx(x,{value:e.biddingText}),s.jsx(j,{columns:["City","Venue","Notes"],children:e.bidding.map((l,d)=>s.jsxs("tr",{className:l.won?"selected":"",children:[s.jsx("td",{children:l.city}),s.jsx("td",{children:s.jsx(f,{to:l.link,children:l.venue})}),s.jsx("td",{children:l.notes})]},d))}),s.jsx("h1",{children:"Semi-Final Allocation Draw"}),s.jsx("hr",{}),s.jsx(x,{value:e.sfDrawText}),s.jsx(g,{children:s.jsx(j,{columns:e.sfDraw.map((l,d)=>`Pot ${d+1}`),children:s.jsx("tr",{children:e.sfDraw.map((l,d)=>s.jsx("td",{children:s.jsx("ul",{style:{marginTop:0},children:l.map((y,T)=>s.jsx("li",{children:s.jsx(S,{id:y})},T))})},d))})})}),s.jsx("h1",{children:"Shows"}),s.jsx("hr",{}),e.shows.map(l=>s.jsx(O,{show:l,data:e},l.id)),s.jsx("div",{style:{marginTop:"2rem"}}),s.jsx(P,{media:e.media}),s.jsx("hr",{style:{clear:"both"}}),s.jsx(u,{to:`/editor/edition/existing/${t.link}/${e.link}`,className:"button is-primary is-outlined",children:"Edit This Page"})]})}export{X as default};
