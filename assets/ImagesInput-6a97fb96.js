import{j as e,r as m}from"./index-cb284629.js";import{b as j,B as x,c as b,O as g}from"./Info-659838fd.js";import{v as C}from"./v4-a960c1f4.js";import{F as k}from"./index.esm-76c7ec2c.js";function F({name:i,description:t,value:s,setValue:n,link:a}){function o(r){let c=r.target.value;a&&(c=c.toLowerCase()),n(c)}return e.jsx(j,{name:i,description:t,children:e.jsx("div",{className:"control",children:e.jsx("input",{className:"input",type:"text",value:s,onChange:o})})})}function L({name:i,description:t,value:s,setValue:n,namePlaceholder:a,linkPlaceholder:o,requiredValues:r}){r||(r=[]);function c(d,h){const p=s.map((u,f)=>f===d?{name:h,link:u.link}:u);n(p)}function l(d,h){const p=s.map((u,f)=>f===d?{name:u.name,link:h}:u);n(p)}return e.jsxs(j,{name:i,description:t,children:[s.map((d,h)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.name,disabled:r.indexOf(d.name)>-1,onChange:p=>c(h,p.target.value),placeholder:a||"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.link,onChange:p=>l(h,p.target.value),placeholder:o||"Destination (Link)"})}),r.indexOf(d.name)===-1?e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>n(s.filter((p,u)=>u!==h)),children:"X"})}):""]},h)),e.jsx(x,{onClick:()=>n([...s,{name:"",link:""}]),children:"Add Another"})]})}function T({name:i,description:t,users:s,value:n,setValue:a,multiple:o}){const r=s.map(l=>e.jsxs("option",{value:l.id,children:[l.current.username," ",l.previous.length>0?`(${l.previous.map(d=>d.username).join(", ")})`:""]},l.id));function c(l,d){a(n.map((h,p)=>p===d?l.target.value:h))}return o?e.jsxs("div",{children:[e.jsx(j,{name:i,description:t,children:n.map((l,d)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:l,onChange:h=>c(h,d),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),r]})}),e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>a(n.filter((h,p)=>d!==p)),children:"X"})})]},d))}),e.jsx(x,{onClick:()=>a([...n,""]),children:"Add Another"})]}):e.jsx(j,{name:i,description:t})}const N={current:"",previous:[],aliases:[],textContent:""};function y({addUser:i}){const t=localStorage.getItem("backup-users"),[s,n]=m.useState(t?JSON.parse(t):N);return m.useEffect(()=>{localStorage.setItem("backup-users",JSON.stringify(s))},[s]),e.jsxs("div",{children:[e.jsx(b,{data:s,setData:(a,o)=>n({...s,[a]:o})}),e.jsx("hr",{}),e.jsx(x,{onClick:()=>{i({id:C(),current:s.current,previous:s.previous,aliases:s.aliases,textContent:s.textContent}),n(N)},children:"Create User"})]})}function E({users:i,setUsers:t}){var o;const[s,n]=m.useState((o=i[0])==null?void 0:o.id),a=i.map(r=>e.jsxs("option",{value:r.id,children:[r.current.username," ",r.previous.length>0?`(${r.previous.map(c=>c.username).join(", ")})`:""]},r.id));return e.jsxs("div",{children:[e.jsx(j,{name:"Choose a user to edit",children:e.jsx("div",{className:"select is-fullwidth",children:e.jsx("select",{value:s,onChange:r=>n(r.target.value),children:a})})}),e.jsx("hr",{}),e.jsx(b,{data:i.find(r=>r.id===s),setData:(r,c)=>t(i.map(l=>l.id===s?{...l,[r]:c}:l))})]})}const w=m.createContext(null),v={didCatch:!1,error:null};class S extends m.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=v}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(...t){var n,a;const{error:s}=this.state;s!==null&&((a=(n=this.props).onReset)==null||a.call(n,{args:t,reason:"imperative-api"}),this.setState(v))}componentDidCatch(t,s){var n,a;(a=(n=this.props).onError)==null||a.call(n,t,s)}componentDidUpdate(t,s){var o,r;const{didCatch:n}=this.state,{resetKeys:a}=this.props;n&&s.error!==null&&I(t.resetKeys,a)&&((r=(o=this.props).onReset)==null||r.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(v))}render(){const{children:t,fallbackRender:s,FallbackComponent:n,fallback:a}=this.props,{didCatch:o,error:r}=this.state;let c=t;if(o){const l={error:r,resetErrorBoundary:this.resetErrorBoundary};if(m.isValidElement(a))c=a;else if(typeof s=="function")c=s(l);else if(n)c=m.createElement(n,l);else throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return m.createElement(w.Provider,{value:{didCatch:o,error:r,resetErrorBoundary:this.resetErrorBoundary}},c)}}function I(i=[],t=[]){return i.length!==t.length||i.some((s,n)=>!Object.is(s,t[n]))}function B({error:i,resetErrorBoundary:t}){function s(){localStorage.removeItem("backup-main"),localStorage.removeItem("backup-broadcasters"),localStorage.removeItem("backup-entry"),localStorage.removeItem("backup-users"),t()}return e.jsxs("div",{style:{width:"100%",background:"var(--pastel-red)",padding:"2rem",borderRadius:"1rem",border:"1px solid red"},children:[e.jsxs("p",{children:["Something went wrong: ",i.message]}),e.jsxs("p",{children:["If you have time, please report this bug to me on Discord: ",e.jsx("div",{className:"tag",children:".gabys"})," with a short description of what you did before it happened"]}),e.jsx("p",{children:"You can try clearing your backups to see if that solves the issue. All progress saved in the backups will be lost forever"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button is-primary",onClick:t,children:"Refresh"}),e.jsx("button",{className:"button is-danger",onClick:s,children:"Clear Backups"})]})]})}function K({users:i,setUsers:t,showOutput:s}){const[n,a]=m.useState("edit");return e.jsxs("div",{className:"box",children:[e.jsx("div",{className:"tabs is-centered",children:e.jsxs("ul",{className:"ml-0",children:[e.jsx("li",{className:n==="edit"?"is-active":"",children:e.jsx("a",{onClick:()=>a("edit"),children:"Edit User"})}),e.jsx("li",{className:n==="new"?"is-active":"",children:e.jsx("a",{onClick:()=>a("new"),children:"New User"})}),s?e.jsx("li",{className:n==="output"?"is-active":"",children:e.jsx("a",{onClick:()=>a("output"),children:"Output"})}):""]})}),e.jsxs(S,{FallbackComponent:B,children:[n==="new"?e.jsx(y,{addUser:o=>t([...i,o])}):"",n==="edit"?e.jsx(E,{users:i,setUsers:t}):"",n==="output"?e.jsx(g,{data:i}):""]})]})}function X({value:i,setValue:t,name:s,description:n,requiredValues:a}){return e.jsxs(j,{name:s,description:n,children:[i.map((o,r)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:o.name,disabled:a.indexOf(o.name)>-1,onChange:c=>t(i.map((l,d)=>d!==r?l:{...l,name:c.target.value})),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("div",{className:"file has-name is-fullwidth",children:e.jsxs("label",{className:"file-label",children:[e.jsx("input",{className:"file-input",type:"file",name:"resume",onChange:c=>t(i.map((l,d)=>d!==r?l:{...l,link:c.target.files[0].name}))}),e.jsxs("span",{className:"file-cta",children:[e.jsx("span",{className:"file-icon",children:e.jsx(k,{})}),e.jsx("span",{className:"file-label",children:"Choose a fileâ€¦"})]}),e.jsx("span",{className:"file-name",children:o.link})]})})}),a.indexOf(o.name)===-1&&e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>t(i.filter((c,l)=>l!==r)),children:"X"})})]},r)),e.jsx(x,{onClick:()=>t([...i,{name:"",link:""}]),children:"Add Another"})]})}export{B,S as E,X as I,L,F as T,T as U,K as a};
