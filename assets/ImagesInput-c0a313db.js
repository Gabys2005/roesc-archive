import{j as e,r as p}from"./index-cfd3194b.js";import{b as j,B as x,c as b,O as g}from"./Info-4d9ecd52.js";import{a as N,v as C}from"./defaultEditorData-3d63535f.js";import{F as k}from"./index.esm-8e1347b1.js";function R({name:i,description:n,value:s,setValue:t,link:a}){function o(r){let c=r.target.value;a&&(c=c.toLowerCase()),t(c)}return e.jsx(j,{name:i,description:n,children:e.jsx("div",{className:"control",children:e.jsx("input",{className:"input",type:"text",value:s,onChange:o})})})}function L({name:i,description:n,value:s,setValue:t,namePlaceholder:a,linkPlaceholder:o,requiredValues:r}){r||(r=[]);function c(d,h){const m=s.map((u,f)=>f===d?{name:h,link:u.link}:u);t(m)}function l(d,h){const m=s.map((u,f)=>f===d?{name:u.name,link:h}:u);t(m)}return e.jsxs(j,{name:i,description:n,children:[s.map((d,h)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.name,disabled:r.indexOf(d.name)>-1,onChange:m=>c(h,m.target.value),placeholder:a||"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.link,onChange:m=>l(h,m.target.value),placeholder:o||"Destination (Link)"})}),r.indexOf(d.name)===-1?e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>t(s.filter((m,u)=>u!==h)),children:"X"})}):""]},h)),e.jsx(x,{onClick:()=>t([...s,{name:"",link:""}]),children:"Add Another"})]})}function T({name:i,description:n,users:s,value:t,setValue:a,multiple:o}){const r=s.map(l=>e.jsxs("option",{value:l.id,children:[l.current.username," ",l.previous.length>0?`(${l.previous.map(d=>d.username).join(", ")})`:""]},l.id));function c(l,d){a(t.map((h,m)=>m===d?l.target.value:h))}return o?e.jsxs("div",{children:[e.jsx(j,{name:i,description:n,children:t.map((l,d)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:l,onChange:h=>c(h,d),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),r]})}),e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>a(t.filter((h,m)=>d!==m)),children:"X"})})]},d))}),e.jsx(x,{onClick:()=>a([...t,""]),children:"Add Another"})]}):e.jsx(j,{name:i,description:n})}function y({addUser:i}){const n=localStorage.getItem("backup-users"),[s,t]=p.useState(n?JSON.parse(n):N);return p.useEffect(()=>{localStorage.setItem("backup-users",JSON.stringify(s))},[s]),e.jsxs(e.Fragment,{children:[e.jsx(b,{data:s,setData:(a,o)=>t({...s,[a]:o})}),e.jsx("div",{className:"box",children:e.jsx(x,{onClick:()=>{i({id:C(),current:s.current,previous:s.previous,aliases:s.aliases,textContent:s.textContent}),t(N)},children:"Create User"})})]})}function E({users:i,setUsers:n}){var o;const[s,t]=p.useState((o=i[0])==null?void 0:o.id),a=i.map(r=>e.jsxs("option",{value:r.id,children:[r.current.username," ",r.previous.length>0?`(${r.previous.map(c=>c.username).join(", ")})`:""]},r.id));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"box",children:e.jsx(j,{name:"Choose a user to edit",children:e.jsx("div",{className:"select is-fullwidth",children:e.jsx("select",{value:s,onChange:r=>t(r.target.value),children:a})})})}),e.jsx(b,{data:i.find(r=>r.id===s),setData:(r,c)=>n(i.map(l=>l.id===s?{...l,[r]:c}:l))})]})}const w=p.createContext(null),v={didCatch:!1,error:null};class S extends p.Component{constructor(n){super(n),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=v}static getDerivedStateFromError(n){return{didCatch:!0,error:n}}resetErrorBoundary(...n){var t,a;const{error:s}=this.state;s!==null&&((a=(t=this.props).onReset)==null||a.call(t,{args:n,reason:"imperative-api"}),this.setState(v))}componentDidCatch(n,s){var t,a;(a=(t=this.props).onError)==null||a.call(t,n,s)}componentDidUpdate(n,s){var o,r;const{didCatch:t}=this.state,{resetKeys:a}=this.props;t&&s.error!==null&&I(n.resetKeys,a)&&((r=(o=this.props).onReset)==null||r.call(o,{next:a,prev:n.resetKeys,reason:"keys"}),this.setState(v))}render(){const{children:n,fallbackRender:s,FallbackComponent:t,fallback:a}=this.props,{didCatch:o,error:r}=this.state;let c=n;if(o){const l={error:r,resetErrorBoundary:this.resetErrorBoundary};if(p.isValidElement(a))c=a;else if(typeof s=="function")c=s(l);else if(t)c=p.createElement(t,l);else throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return p.createElement(w.Provider,{value:{didCatch:o,error:r,resetErrorBoundary:this.resetErrorBoundary}},c)}}function I(i=[],n=[]){return i.length!==n.length||i.some((s,t)=>!Object.is(s,n[t]))}function B({error:i,resetErrorBoundary:n}){function s(){localStorage.removeItem("backup-main"),localStorage.removeItem("backup-broadcasters"),localStorage.removeItem("backup-entry"),localStorage.removeItem("backup-users"),n()}return e.jsxs("div",{style:{width:"100%",background:"var(--pastel-red)",padding:"2rem",borderRadius:"1rem",border:"1px solid red"},children:[e.jsxs("p",{children:["Something went wrong: ",i.message]}),e.jsxs("p",{children:["If you have time, please report this bug to me on Discord: ",e.jsx("div",{className:"tag",children:".gabys"})," with a short description of what you did before it happened"]}),e.jsx("p",{children:"You can try clearing your backups to see if that solves the issue. All progress saved in the backups will be lost forever"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button is-primary",onClick:n,children:"Refresh"}),e.jsx("button",{className:"button is-danger",onClick:s,children:"Clear Backups"})]})]})}function K({users:i,setUsers:n,showOutput:s}){const[t,a]=p.useState("edit");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"box",children:e.jsx("div",{className:"tabs is-centered",children:e.jsxs("ul",{className:"ml-0",children:[e.jsx("li",{className:t==="edit"?"is-active":"",children:e.jsx("a",{onClick:()=>a("edit"),children:"Edit User"})}),e.jsx("li",{className:t==="new"?"is-active":"",children:e.jsx("a",{onClick:()=>a("new"),children:"New User"})}),s?e.jsx("li",{className:t==="output"?"is-active":"",children:e.jsx("a",{onClick:()=>a("output"),children:"Output"})}):""]})})}),e.jsxs(S,{FallbackComponent:B,children:[t==="new"?e.jsx(y,{addUser:o=>n([...i,o])}):"",t==="edit"?e.jsx(E,{users:i,setUsers:n}):"",t==="output"?e.jsx(g,{data:i}):""]})]})}function X({value:i,setValue:n,name:s,description:t,requiredValues:a}){return e.jsxs(j,{name:s,description:t,children:[i.map((o,r)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:o.name,disabled:a.indexOf(o.name)>-1,onChange:c=>n(i.map((l,d)=>d!==r?l:{...l,name:c.target.value})),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("div",{className:"file has-name is-fullwidth",children:e.jsxs("label",{className:"file-label",children:[e.jsx("input",{className:"file-input",type:"file",name:"resume",onChange:c=>n(i.map((l,d)=>d!==r?l:{...l,link:c.target.files[0].name}))}),e.jsxs("span",{className:"file-cta",children:[e.jsx("span",{className:"file-icon",children:e.jsx(k,{})}),e.jsx("span",{className:"file-label",children:"Choose a fileâ€¦"})]}),e.jsx("span",{className:"file-name",children:o.link})]})})}),a.indexOf(o.name)===-1&&e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>n(i.filter((c,l)=>l!==r)),children:"X"})})]},r)),e.jsx(x,{onClick:()=>n([...i,{name:"",link:""}]),children:"Add Another"})]})}export{B,S as E,X as I,L,R as T,T as U,K as a};
