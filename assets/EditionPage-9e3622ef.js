import{j as s,r as u,L as N,u as C}from"./index-12246d42.js";import{a as A}from"./roesc-5b8c8eb2.js";import{g as D}from"./fetchData-91a3fcfa.js";import{p as F,M as m}from"./Markdown-db1b33e3.js";import{T as p}from"./Table-d5d45aa5.js";import{T as j,C as h,M as E}from"./Media-dfce17b1.js";import{O as M,g as S,f as k,c as B}from"./OutLink-39259bfa.js";import{M as O}from"./MediaSection-05ee0170.js";import{s as v,v as R,B as y}from"./BiddingTable-b8208393.js";import{U as g}from"./UsersString-5bba2cd4.js";import{g as L}from"./broadcasters-ebd6bdb6.js";import"./countryList-498b3ce4.js";import"./users-78790ed8.js";function f({data:t,titleOnly:i}){const e=i?t.title:`${t.artists.join(", ")} - ${t.title}`;return s.jsx("span",{children:s.jsx(M,{to:t.link,children:e})})}function $({ids:t}){const[i,e]=u.useState([]);return u.useEffect(()=>{const r=t.filter(n=>!!n).map(n=>L(n));Promise.all(r).then(n=>{e(n.map((l,d)=>s.jsxs(N,{to:`/broadcasters/${l.link}`,children:[l.name,d===n.length-1?"":", "]},l.id)))})},[t]),i}function P({name:t,shows:i,showIndex:e}){const r=i.filter(n=>n[e].length>0);return r.length===0?s.jsx(s.Fragment,{}):s.jsxs(s.Fragment,{children:[s.jsx("tr",{style:{textAlign:"center"},children:s.jsxs("th",{colSpan:2,children:[t," Acts"]})}),r.map(n=>s.jsxs("tr",{children:[s.jsx("th",{children:v[n.id]}),s.jsx("td",{children:n[e].map((l,d)=>s.jsxs("div",{children:[s.jsx(f,{data:l}),s.jsx("br",{})]},d))})]},n.id))]})}function I({data:t,roescData:i}){return s.jsx("div",{className:"table-container sideTable",style:{float:"right",marginLeft:"1rem"},children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable",children:[s.jsx("thead",{children:s.jsx("tr",{style:{textAlign:"center"},children:s.jsxs("th",{colSpan:2,children:[i.name," ",t.edition]})})}),s.jsxs("tbody",{children:[S(t.media,"logos").length>0?s.jsx("tr",{children:s.jsx("td",{colSpan:2,children:s.jsx(O,{link:S(t.media,"logos")[0].link})})}):"",t.presenters.length>0&&s.jsxs("tr",{children:[s.jsx("th",{children:"Presenters"}),s.jsx("td",{children:t.presenters.map((e,r)=>s.jsxs("span",{children:[e.name," ",e.id&&s.jsxs("span",{children:["(",s.jsx(g,{userids:[e.id]}),")"]}),s.jsx("br",{})]},r))})]}),t.broadcasters.length>0&&s.jsxs("tr",{children:[s.jsx("th",{children:"Broadcaster"}),s.jsx("td",{children:s.jsx($,{ids:t.broadcasters})})]}),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Dates"})}),t.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:v[e.id]}),s.jsx("td",{children:F(e.date)})]},e.id)),s.jsx(P,{name:"Opening",shows:t.shows,showIndex:"openings"}),s.jsx(P,{name:"Interval",shows:t.shows,showIndex:"intervals"})]})]})})}function q(t,i){var d;const e=i.votingMethod,r=(d=R.find(o=>o.value===e))==null?void 0:d.points[0],n=[];return t.entries.forEach(o=>{const a=o.shows.find(c=>c.id===i.id);if(a&&a.votes&&a.votes[0]){const c=a.votes[0],x=n.find(b=>b.country===c);x?x.givers.push(o.country):n.push({country:c,givers:[o.country]})}}),{maxPoints:r,getters:n.sort((o,a)=>a.givers.length-o.givers.length)}}function W({data:t,show:i}){const e=q(t,i);return e.getters.length===0?s.jsx(s.Fragment,{}):s.jsx(j,{children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable is-narrow",style:{width:"inherit"},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"N."}),s.jsx("th",{children:"Contestant"}),s.jsxs("th",{children:["Nation(s) giving ",e.maxPoints," points"]})]})}),s.jsx("tbody",{children:e.getters.map((r,n)=>s.jsxs("tr",{children:[s.jsx("th",{children:r.givers.length}),s.jsx("td",{children:s.jsx(h,{id:r.country})}),s.jsx("td",{children:r.givers.map((l,d)=>s.jsxs(s.Fragment,{children:[s.jsx(h,{id:l},d),d===r.givers.length-1?"":", "]}))})]},n))})]})})}function G(t,i){const e=[];return t.entries.forEach(r=>{const n=r.shows.find(l=>l.id===i);if(n!=null&&n.participated){let l="";n.qualified&&(l="selected"),i==="gf"&&(console.log(n),n.place===1?l="firstplace":n.place===2?l="secondplace":n.place===3&&(l="thirdplace")),e.push({ro:n.order,country:r.country,participant:r.hods,song:r.song,place:n.place,points:n.points.total,qualified:n.qualified,className:l})}}),e.sort((r,n)=>r.ro-n.ro),e}function J({entries:t}){return s.jsx(j,{children:s.jsx("div",{className:"my-5",children:s.jsx(p,{columns:["Order","Country","Participant","Artist","Song","Place","Points"],smallFirst:!0,compact:!0,children:t.map((i,e)=>s.jsxs("tr",{className:i.className,children:[s.jsx("td",{style:{textAlign:"center"},children:k(i.ro)}),s.jsx("td",{children:s.jsx(h,{id:i.country})}),s.jsx("td",{children:s.jsx(g,{userids:i.participant})}),s.jsx("td",{children:i.song.artists}),s.jsx("td",{children:s.jsx(f,{data:i.song,titleOnly:!0})}),s.jsx("td",{children:i.place}),s.jsx("td",{children:i.points})]},e))})})})}function U({entries:t}){return s.jsx(j,{children:s.jsx("div",{className:"my-5",children:s.jsx(p,{columns:["Country","Participant","Artist","Song"],compact:!0,children:t.map((i,e)=>s.jsxs("tr",{className:i.className,children:[s.jsx("td",{children:s.jsx(h,{id:i.country})}),s.jsx("td",{children:s.jsx(g,{userids:i.participant})}),s.jsx("td",{children:i.song.artists}),s.jsx("td",{children:s.jsx(f,{data:i.song,titleOnly:!0})})]},e))})})})}function _({show:t,data:i}){const e=G(i,t);return e.find(n=>n.ro!=0||n.place!=0||n.points!=0)?s.jsx(J,{entries:e}):s.jsx(U,{entries:e})}function w(t,i,e){const r=[];return t.entries.forEach(n=>{const l=n.shows.find(d=>d.id===i);if(l){let d="";l.qualified&&(d="selected"),r.push({country:n.country,juryPoints:l.points.jury,telePoints:l.points.tele,className:d})}}),r.sort((n,l)=>l[e]-n[e])}function z({show:t,data:i}){const e=w(i,t,"juryPoints"),r=w(i,t,"telePoints");return!e.find(l=>l.juryPoints!=0||l.telePoints!=0)?s.jsx(s.Fragment,{}):s.jsx(j,{children:s.jsx("div",{className:"my-5",children:s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable is-narrow",style:{width:"inherit"},children:[s.jsxs("thead",{children:[s.jsx("tr",{children:s.jsx("th",{style:{textAlign:"center"},colSpan:5,children:"Split Results"})}),s.jsxs("tr",{style:{textAlign:"center"},children:[s.jsx("th",{rowSpan:2,children:"Place"}),s.jsx("th",{colSpan:2,children:"Jury"}),s.jsx("th",{colSpan:2,children:"Televoting"})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Country"}),s.jsx("th",{children:"Points"}),s.jsx("th",{children:"Country"}),s.jsx("th",{children:"Points"})]})]}),s.jsx("tbody",{children:e.map((l,d)=>s.jsxs("tr",{children:[s.jsx("th",{style:{textAlign:"center"},children:d+1}),s.jsx("td",{className:l.className,children:s.jsx(h,{id:l.country})}),s.jsx("td",{className:l.className,children:l.juryPoints}),s.jsx("td",{className:r[d].className,children:s.jsx(h,{id:r[d].country})}),s.jsx("td",{className:r[d].className,children:r[d].telePoints})]},d))})]})})})})}function H({data:t,show:i}){return i.textContent||t.entries.find(r=>r.shows.find(n=>n.id===i.id))?s.jsxs("div",{className:"mb-5",children:[s.jsx("h2",{children:v[i.id]}),s.jsx(m,{value:i.textContent}),s.jsx(_,{data:t,show:i.id}),s.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-around",flexWrap:"wrap"},children:[s.jsx(z,{data:t,show:i.id}),s.jsx(W,{data:t,show:i})]})]}):s.jsx(s.Fragment,{})}function K({entries:t}){return t.find(e=>e.shows.length>0)?s.jsx(s.Fragment,{}):s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Participants"}),s.jsx("hr",{}),s.jsx(p,{columns:["Country","Participant","Artist","Song"],children:t.map((e,r)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(j,{children:s.jsx(h,{id:e.country})})}),s.jsx("td",{children:s.jsx(g,{userids:e.hods})}),s.jsx("td",{children:e.song.artists}),s.jsx("td",{children:s.jsx(f,{data:e.song,titleOnly:!0})})]},r))})]})}function cs(){var a;const{roesc:t,edition:i}=C(),[e,r]=u.useState(),[n,l]=u.useState(),[d,o]=u.useState("");return u.useEffect(()=>{A(t,i).then(c=>r(c)).catch(c=>o(c)),D(t).then(c=>l(c)).catch(()=>{})},[t,i]),!e||!n?s.jsx("h1",{children:"Loading..."}):d?s.jsxs("h1",{children:["Error: ",d]}):s.jsxs("div",{children:[s.jsx("h1",{children:e.fullName}),s.jsx("hr",{}),s.jsx(I,{data:e,roescData:n}),s.jsx(m,{value:e.textContent}),(e.biddingText||e.bidding.length>0)&&s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Location"}),s.jsx("hr",{}),s.jsx(m,{value:e.biddingText,overrides:{BiddingTable:{component:y,props:{data:e.bidding}}}}),e.bidding.length>0&&!B(e.biddingText,"BiddingTable")&&s.jsx(y,{data:e.bidding})]}),(e.sfDrawText||e.sfDraw.length>0)&&s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Semi-Final Allocation Draw"}),s.jsx("hr",{}),s.jsx(m,{value:e.sfDrawText}),s.jsx(j,{children:s.jsx(p,{columns:e.sfDraw.map((c,x)=>`Pot ${x+1}`),children:s.jsx("tr",{children:e.sfDraw.map((c,x)=>s.jsx("td",{children:s.jsx("ul",{style:{marginTop:0},children:c.map((b,T)=>s.jsx("li",{children:s.jsx(h,{id:b})},T))})},x))})})})]}),s.jsx(K,{entries:e.entries}),s.jsx("h1",{children:"Shows"}),s.jsx("hr",{}),e.shows.map(c=>s.jsx(H,{show:c,data:e},c.id)),s.jsx("div",{style:{marginTop:"2rem"}}),((a=e.replacements)==null?void 0:a.length)>0&&s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Original entries"}),s.jsx("hr",{}),s.jsx(p,{columns:["Country","Participant","Artists","Song"],children:e.replacements.map((c,x)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(j,{children:s.jsx(h,{id:c.country})})}),s.jsx("td",{children:s.jsx(g,{userids:[c.participant]})}),s.jsx("td",{children:c.song.artists}),s.jsx("td",{children:s.jsx(f,{data:c.song,titleOnly:!0})})]},x))})]}),e.incidents&&s.jsxs(s.Fragment,{children:[s.jsx("h1",{children:"Incidents"}),s.jsx("hr",{}),s.jsx(m,{value:e.incidents}),s.jsx("div",{style:{marginTop:"2rem"}})]}),s.jsx(E,{media:e.media}),s.jsx("hr",{style:{clear:"both"}}),s.jsx(N,{to:`/editor/edition/existing/${n.link}/${e.link}`,className:"button is-primary is-outlined",children:"Edit This Page"})]})}export{cs as default};
