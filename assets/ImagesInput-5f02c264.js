import{j as e,r as m}from"./index-00973617.js";import{b as x,B as j,c as b,O as g}from"./Info-5e156363.js";import{p as C}from"./parseDate-e6b73185.js";import{v as k}from"./v4-a960c1f4.js";import{F as y}from"./index.esm-bf87cbac.js";function Y({name:r,description:t,value:s,setValue:n}){return e.jsx(x,{name:r,description:t,children:e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:s,onChange:a=>n(a.target.value),placeholder:"YYYY/MM/DD"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:C(s)})})]})})}function L({name:r,description:t,value:s,setValue:n,link:a}){function o(i){let c=i.target.value;a&&(c=c.toLowerCase()),n(c)}return e.jsx(x,{name:r,description:t,children:e.jsx("div",{className:"control",children:e.jsx("input",{className:"input",type:"text",value:s,onChange:o})})})}function T({name:r,description:t,value:s,setValue:n,namePlaceholder:a,linkPlaceholder:o,requiredValues:i}){i||(i=[]);function c(d,h){const p=s.map((u,f)=>f===d?{name:h,link:u.link}:u);n(p)}function l(d,h){const p=s.map((u,f)=>f===d?{name:u.name,link:h}:u);n(p)}return e.jsxs(x,{name:r,description:t,children:[s.map((d,h)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.name,disabled:i.indexOf(d.name)>-1,onChange:p=>c(h,p.target.value),placeholder:a||"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.link,onChange:p=>l(h,p.target.value),placeholder:o||"Destination (Link)"})}),i.indexOf(d.name)===-1?e.jsx("div",{className:"control",children:e.jsx(j,{color:"danger",onClick:()=>n(s.filter((p,u)=>u!==h)),children:"X"})}):""]},h)),e.jsx(j,{onClick:()=>n([...s,{name:"",link:""}]),children:"Add Another"})]})}function K({name:r,description:t,users:s,value:n,setValue:a,multiple:o}){const i=s.map(l=>e.jsxs("option",{value:l.id,children:[l.current.username," ",l.previous.length>0?`(${l.previous.map(d=>d.username).join(", ")})`:""]},l.id));function c(l,d){a(n.map((h,p)=>p===d?l.target.value:h))}return o?e.jsxs("div",{children:[e.jsx(x,{name:r,description:t,children:n.map((l,d)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:l,onChange:h=>c(h,d),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),i]})}),e.jsx("div",{className:"control",children:e.jsx(j,{color:"danger",onClick:()=>a(n.filter((h,p)=>d!==p)),children:"X"})})]},d))}),e.jsx(j,{onClick:()=>a([...n,""]),children:"Add Another"})]}):e.jsx(x,{name:r,description:t})}const N={current:"",previous:[],aliases:[],textContent:""};function E({addUser:r}){const t=localStorage.getItem("backup-users"),[s,n]=m.useState(t?JSON.parse(t):N);return m.useEffect(()=>{localStorage.setItem("backup-users",JSON.stringify(s))},[s]),e.jsxs("div",{children:[e.jsx(b,{data:s,setData:(a,o)=>n({...s,[a]:o})}),e.jsx("hr",{}),e.jsx(j,{onClick:()=>{r({id:k(),current:s.current,previous:s.previous,aliases:s.aliases,textContent:s.textContent}),n(N)},children:"Create User"})]})}function w({users:r,setUsers:t}){var o;const[s,n]=m.useState((o=r[0])==null?void 0:o.id),a=r.map(i=>e.jsxs("option",{value:i.id,children:[i.current.username," ",i.previous.length>0?`(${i.previous.map(c=>c.username).join(", ")})`:""]},i.id));return e.jsxs("div",{children:[e.jsx(x,{name:"Choose a user to edit",children:e.jsx("div",{className:"select is-fullwidth",children:e.jsx("select",{value:s,onChange:i=>n(i.target.value),children:a})})}),e.jsx("hr",{}),e.jsx(b,{data:r.find(i=>i.id===s),setData:(i,c)=>t(r.map(l=>l.id===s?{...l,[i]:c}:l))})]})}const S=m.createContext(null),v={didCatch:!1,error:null};class I extends m.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=v}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(...t){var n,a;const{error:s}=this.state;s!==null&&((a=(n=this.props).onReset)==null||a.call(n,{args:t,reason:"imperative-api"}),this.setState(v))}componentDidCatch(t,s){var n,a;(a=(n=this.props).onError)==null||a.call(n,t,s)}componentDidUpdate(t,s){var o,i;const{didCatch:n}=this.state,{resetKeys:a}=this.props;n&&s.error!==null&&B(t.resetKeys,a)&&((i=(o=this.props).onReset)==null||i.call(o,{next:a,prev:t.resetKeys,reason:"keys"}),this.setState(v))}render(){const{children:t,fallbackRender:s,FallbackComponent:n,fallback:a}=this.props,{didCatch:o,error:i}=this.state;let c=t;if(o){const l={error:i,resetErrorBoundary:this.resetErrorBoundary};if(m.isValidElement(a))c=a;else if(typeof s=="function")c=s(l);else if(n)c=m.createElement(n,l);else throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return m.createElement(S.Provider,{value:{didCatch:o,error:i,resetErrorBoundary:this.resetErrorBoundary}},c)}}function B(r=[],t=[]){return r.length!==t.length||r.some((s,n)=>!Object.is(s,t[n]))}function O({error:r,resetErrorBoundary:t}){function s(){localStorage.removeItem("backup-main"),localStorage.removeItem("backup-broadcasters"),localStorage.removeItem("backup-entry"),localStorage.removeItem("backup-users"),t()}return e.jsxs("div",{style:{width:"100%",background:"var(--pastel-red)",padding:"2rem",borderRadius:"1rem",border:"1px solid red"},children:[e.jsxs("p",{children:["Something went wrong: ",r.message]}),e.jsxs("p",{children:["If you have time, please report this bug to me on Discord: ",e.jsx("div",{className:"tag",children:".gabys"})," with a short description of what you did before it happened"]}),e.jsx("p",{children:"You can try clearing your backups to see if that solves the issue. All progress saved in the backups will be lost forever"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button is-primary",onClick:t,children:"Refresh"}),e.jsx("button",{className:"button is-danger",onClick:s,children:"Clear Backups"})]})]})}function X({users:r,setUsers:t,showOutput:s}){const[n,a]=m.useState("edit");return e.jsxs("div",{className:"box",children:[e.jsx("div",{className:"tabs is-centered",children:e.jsxs("ul",{className:"ml-0",children:[e.jsx("li",{className:n==="edit"?"is-active":"",children:e.jsx("a",{onClick:()=>a("edit"),children:"Edit User"})}),e.jsx("li",{className:n==="new"?"is-active":"",children:e.jsx("a",{onClick:()=>a("new"),children:"New User"})}),s?e.jsx("li",{className:n==="output"?"is-active":"",children:e.jsx("a",{onClick:()=>a("output"),children:"Output"})}):""]})}),e.jsxs(I,{FallbackComponent:O,children:[n==="new"?e.jsx(E,{addUser:o=>t([...r,o])}):"",n==="edit"?e.jsx(w,{users:r,setUsers:t}):"",n==="output"?e.jsx(g,{data:r}):""]})]})}function J({value:r,setValue:t,name:s,description:n,requiredValues:a}){return e.jsxs(x,{name:s,description:n,children:[r.map((o,i)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:o.name,disabled:a.indexOf(o.name)>-1,onChange:c=>t(r.map((l,d)=>d!==i?l:{...l,name:c.target.value})),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("div",{className:"file has-name is-fullwidth",children:e.jsxs("label",{className:"file-label",children:[e.jsx("input",{className:"file-input",type:"file",name:"resume",onChange:c=>t(r.map((l,d)=>d!==i?l:{...l,link:c.target.files[0].name}))}),e.jsxs("span",{className:"file-cta",children:[e.jsx("span",{className:"file-icon",children:e.jsx(y,{})}),e.jsx("span",{className:"file-label",children:"Choose a fileâ€¦"})]}),e.jsx("span",{className:"file-name",children:o.link})]})})}),a.indexOf(o.name)===-1&&e.jsx("div",{className:"control",children:e.jsx(j,{color:"danger",onClick:()=>t(r.filter((c,l)=>l!==i)),children:"X"})})]},i)),e.jsx(j,{onClick:()=>t([...r,{name:"",link:""}]),children:"Add Another"})]})}export{O as B,Y as D,I as E,J as I,T as L,L as T,K as U,X as a};
