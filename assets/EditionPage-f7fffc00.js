import{j as s,r as o,L as S,u as T}from"./index-f9fdc040.js";import{a as w}from"./roesc-56ec91bc.js";import{g as A}from"./fetchData-d596981c.js";import{p as E,M as h}from"./Markdown-2b28e061.js";import{T as m}from"./Table-b45b097f.js";import{O as y}from"./OutLink-5d9e1dd1.js";import{T as u,C as j,M as k}from"./Media-fd76dfdd.js";import{g as f,f as C}from"./utils-d4abb36f.js";import{M as D}from"./MediaSection-629af7f1.js";import{s as x}from"./showList-162192a9.js";import{U as b}from"./UsersString-c05562f5.js";import{g as L}from"./broadcasters-92d075d5.js";import"./countryList-2a07b954.js";import"./users-f6f7b96c.js";function p({data:r,titleOnly:l}){const e=l?r.title:`${r.artists.join(", ")} - ${r.title}`;return s.jsx("span",{children:s.jsx(y,{to:r.link,children:e})})}function M({ids:r}){const[l,e]=o.useState([]);return o.useEffect(()=>{const i=r.filter(t=>!!t).map(t=>L(t));Promise.all(i).then(t=>{e(t.map((n,d)=>s.jsxs(S,{to:`/broadcasters/${n.link}`,children:[n.name,d===t.length-1?"":", "]},n.id)))})},[r]),l}function $({data:r,roescData:l}){return s.jsx("div",{className:"table-container sideTable",style:{float:"right",marginLeft:"1rem"},children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable",children:[s.jsx("thead",{children:s.jsx("tr",{style:{textAlign:"center"},children:s.jsxs("th",{colSpan:2,children:[l.name," ",r.edition]})})}),s.jsxs("tbody",{children:[f(r.media,"logos").length>0?s.jsx("tr",{children:s.jsx("td",{colSpan:2,children:s.jsx(D,{link:f(r.media,"logos")[0].link})})}):"",s.jsxs("tr",{children:[s.jsx("th",{children:"Presenters"}),s.jsx("td",{children:r.presenters.map((e,i)=>s.jsxs("span",{children:[e.name," ",e.id&&s.jsxs("span",{children:["(",s.jsx(b,{userids:[e.id]}),")"]}),s.jsx("br",{})]},i))})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Broadcaster"}),s.jsx("td",{children:s.jsx(M,{ids:r.broadcasters})})]}),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Dates"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:x[e.id]}),s.jsx("td",{children:E(e.date)})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Opening Acts"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:x[e.id]}),s.jsx("td",{children:e.openings.map((i,t)=>s.jsxs("div",{children:[s.jsx(p,{data:i}),s.jsx("br",{})]},t))})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Interval Acts"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:x[e.id]}),s.jsx("td",{children:e.intervals.map((i,t)=>s.jsxs("div",{children:[s.jsx(p,{data:i}),s.jsx("br",{})]},t))})]},e.id))]})]})})}function R(r,l){const e=[];return r.entries.forEach(i=>{const t=i.shows.find(n=>n.id===l);if(t){let n="";t.qualified&&(n="selected"),l==="gf"&&(console.log(t),t.place===1?n="firstplace":t.place===2?n="secondplace":t.place===3&&(n="thirdplace")),e.push({ro:t.order,country:i.country,participant:i.hods,song:i.song,place:t.place,points:t.points.total,qualified:t.qualified,className:n})}}),e.sort((i,t)=>i.ro-t.ro),e}function B({show:r,data:l}){return s.jsx(u,{children:s.jsx("div",{className:"my-5",children:s.jsx(m,{columns:["Order","Country","Participant","Artist","Song","Place","Points"],smallFirst:!0,compact:!0,children:R(l,r).map((e,i)=>s.jsxs("tr",{className:e.className,children:[s.jsx("td",{style:{textAlign:"center"},children:C(e.ro)}),s.jsx("td",{children:s.jsx(j,{id:e.country})}),s.jsx("td",{children:s.jsx(b,{userids:e.participant})}),s.jsx("td",{children:e.song.artists}),s.jsx("td",{children:s.jsx(p,{data:e.song,titleOnly:!0})}),s.jsx("td",{children:e.place}),s.jsx("td",{children:e.points})]},i))})})})}function g(r,l,e){const i=[];return r.entries.forEach(t=>{const n=t.shows.find(d=>d.id===l);if(n){let d="";n.qualified&&(d="selected"),i.push({country:t.country,juryPoints:n.points.jury,telePoints:n.points.tele,className:d})}}),i.sort((t,n)=>t[e]-n[e]),i}function O({show:r,data:l}){const e=g(l,r,"juryPoints"),i=g(l,r,"teleSorted");return s.jsx(u,{children:s.jsx("div",{className:"my-5",children:s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable",style:{width:"inherit"},children:[s.jsxs("thead",{children:[s.jsx("tr",{children:s.jsx("th",{style:{textAlign:"center"},colSpan:5,children:"Split Results"})}),s.jsxs("tr",{style:{textAlign:"center"},children:[s.jsx("th",{rowSpan:2,children:"Place"}),s.jsx("th",{colSpan:2,children:"Jury"}),s.jsx("th",{colSpan:2,children:"Televoting"})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Country"}),s.jsx("th",{children:"Points"}),s.jsx("th",{children:"Country"}),s.jsx("th",{children:"Points"})]})]}),s.jsx("tbody",{children:e.map((t,n)=>s.jsxs("tr",{children:[s.jsx("th",{style:{textAlign:"center"},children:n+1}),s.jsx("td",{children:s.jsx(j,{id:t.country})}),s.jsx("td",{children:t.juryPoints}),s.jsx("td",{children:s.jsx(j,{id:i[n].country})}),s.jsx("td",{children:i[n].telePoints})]},n))})]})})})})}function q({data:r,show:l}){return s.jsxs("div",{children:[s.jsx("h2",{children:x[l.id]}),s.jsx(h,{value:l.textContent}),s.jsx(B,{data:r,show:l.id}),s.jsx(O,{data:r,show:l.id})]})}function Z(){const{roesc:r,edition:l}=T(),[e,i]=o.useState(),[t,n]=o.useState(),[d,v]=o.useState("");return o.useEffect(()=>{w(r,l).then(c=>i(c)).catch(c=>v(c)),A(r).then(c=>n(c)).catch(()=>{})},[r,l]),!e||!t?s.jsx("h1",{children:"Loading..."}):d?s.jsxs("h1",{children:["Error: ",d]}):s.jsxs("div",{children:[s.jsx("h1",{children:e.fullName}),s.jsx("hr",{}),s.jsx($,{data:e,roescData:t}),s.jsx(h,{value:e.textContent}),s.jsx("h1",{children:"Location"}),s.jsx("hr",{}),s.jsx(h,{value:e.biddingText}),s.jsx(m,{columns:["City","Venue","Notes"],children:e.bidding.map((c,a)=>s.jsxs("tr",{className:c.won?"selected":"",children:[s.jsx("td",{children:c.city}),s.jsx("td",{children:s.jsx(y,{to:c.link,children:c.venue})}),s.jsx("td",{children:c.notes})]},a))}),s.jsx("h1",{children:"Semi-Final Allocation Draw"}),s.jsx("hr",{}),s.jsx(h,{value:e.sfDrawText}),s.jsx(u,{children:s.jsx(m,{columns:e.sfDraw.map((c,a)=>`Pot ${a+1}`),children:s.jsx("tr",{children:e.sfDraw.map((c,a)=>s.jsx("td",{children:s.jsx("ul",{style:{marginTop:0},children:c.map((P,N)=>s.jsx("li",{children:s.jsx(j,{id:P})},N))})},a))})})}),s.jsx("h1",{children:"Shows"}),s.jsx("hr",{}),e.shows.map(c=>s.jsx(q,{show:c,data:e},c.id)),s.jsx("div",{style:{marginTop:"2rem"}}),s.jsx(k,{media:e.media}),s.jsx("hr",{style:{clear:"both"}}),s.jsx(S,{to:`/editor/edition/existing/${t.link}/${e.link}`,className:"button is-primary is-outlined",children:"Edit This Page"})]})}export{Z as default};
