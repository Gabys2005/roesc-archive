import{j as e,r as p}from"./index-f4136aee.js";import{c as j,B as x,a as g,O as b}from"./Output-d9400d92.js";import{F as C}from"./index.esm-3f55ff3f.js";import{d as N,v as k}from"./v4-872b0555.js";function R({name:i,description:t,value:n,setValue:s,link:r}){function o(a){let c=a.target.value;r&&(c=c.toLowerCase()),s(c)}return e.jsx(j,{name:i,description:t,children:e.jsx("div",{className:"control",children:e.jsx("input",{className:"input",type:"text",value:n,onChange:o})})})}function L({name:i,description:t,value:n,setValue:s,namePlaceholder:r,linkPlaceholder:o,requiredValues:a}){a||(a=[]);function c(d,h){const m=n.map((u,f)=>f===d?{name:h,link:u.link}:u);s(m)}function l(d,h){const m=n.map((u,f)=>f===d?{name:u.name,link:h}:u);s(m)}return e.jsxs(j,{name:i,description:t,children:[n.map((d,h)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.name,disabled:a.indexOf(d.name)>-1,onChange:m=>c(h,m.target.value),placeholder:r||"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:d.link,onChange:m=>l(h,m.target.value),placeholder:o||"Destination (Link)"})}),a.indexOf(d.name)===-1?e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>s(n.filter((m,u)=>u!==h)),children:"X"})}):""]},h)),e.jsx(x,{onClick:()=>s([...n,{name:"",link:""}]),children:"Add Another"})]})}function T({name:i,description:t,users:n,value:s,setValue:r,multiple:o}){const a=n.map(l=>e.jsxs("option",{value:l.id,children:[l.current.username," ",l.previous.length>0?`(${l.previous.map(d=>d.username).join(", ")})`:""]},l.id));p.useEffect(()=>{s||r([])},[s,r]);function c(l,d){r(s.map((h,m)=>m===d?l.target.value:h))}return s?o?e.jsxs("div",{children:[e.jsx(j,{name:i,description:t,children:s.map((l,d)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:l,onChange:h=>c(h,d),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),a]})}),e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>r(s.filter((h,m)=>d!==m)),children:"X"})})]},d))}),e.jsx(x,{onClick:()=>r([...s,""]),children:"Add Another"})]}):e.jsx(j,{name:i,description:t}):e.jsx(e.Fragment,{})}function K({value:i,setValue:t,name:n,description:s,requiredValues:r}){return e.jsxs(j,{name:n,description:s,children:[i.map((o,a)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:o.name,disabled:r.indexOf(o.name)>-1,onChange:c=>t(i.map((l,d)=>d!==a?l:{...l,name:c.target.value})),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:":"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("div",{className:"file has-name is-fullwidth",children:e.jsxs("label",{className:"file-label",children:[e.jsx("input",{className:"file-input",type:"file",name:"resume",onChange:c=>t(i.map((l,d)=>d!==a?l:{...l,link:c.target.files[0].name}))}),e.jsxs("span",{className:"file-cta",children:[e.jsx("span",{className:"file-icon",children:e.jsx(C,{})}),e.jsx("span",{className:"file-label",children:"Choose a fileâ€¦"})]}),e.jsx("span",{className:"file-name",children:o.link})]})})}),r.indexOf(o.name)===-1&&e.jsx("div",{className:"control",children:e.jsx(x,{color:"danger",onClick:()=>t(i.filter((c,l)=>l!==a)),children:"X"})})]},a)),e.jsx(x,{onClick:()=>t([...i,{name:"",link:""}]),children:"Add Another"})]})}function y({addUser:i}){const t=localStorage.getItem("backup-users"),[n,s]=p.useState(t?JSON.parse(t):N);return p.useEffect(()=>{localStorage.setItem("backup-users",JSON.stringify(n))},[n]),e.jsxs(e.Fragment,{children:[e.jsx(g,{data:n,setData:(r,o)=>s({...n,[r]:o})}),e.jsx("div",{className:"box",children:e.jsx(x,{onClick:()=>{i({id:k(),current:n.current,previous:n.previous,aliases:n.aliases,textContent:n.textContent}),s(N)},children:"Create User"})})]})}function E({users:i,setUsers:t}){var o;const[n,s]=p.useState((o=i[0])==null?void 0:o.id),r=i.map(a=>e.jsxs("option",{value:a.id,children:[a.current.username," ",a.previous.length>0?`(${a.previous.map(c=>c.username).join(", ")})`:""]},a.id));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"box",children:e.jsx(j,{name:"Choose a user to edit",children:e.jsx("div",{className:"select is-fullwidth",children:e.jsx("select",{value:n,onChange:a=>s(a.target.value),children:r})})})}),e.jsx(g,{data:i.find(a=>a.id===n),setData:(a,c)=>t(i.map(l=>l.id===n?{...l,[a]:c}:l))})]})}const w=p.createContext(null),v={didCatch:!1,error:null};class S extends p.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=v}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(...t){var s,r;const{error:n}=this.state;n!==null&&((r=(s=this.props).onReset)==null||r.call(s,{args:t,reason:"imperative-api"}),this.setState(v))}componentDidCatch(t,n){var s,r;(r=(s=this.props).onError)==null||r.call(s,t,n)}componentDidUpdate(t,n){var o,a;const{didCatch:s}=this.state,{resetKeys:r}=this.props;s&&n.error!==null&&I(t.resetKeys,r)&&((a=(o=this.props).onReset)==null||a.call(o,{next:r,prev:t.resetKeys,reason:"keys"}),this.setState(v))}render(){const{children:t,fallbackRender:n,FallbackComponent:s,fallback:r}=this.props,{didCatch:o,error:a}=this.state;let c=t;if(o){const l={error:a,resetErrorBoundary:this.resetErrorBoundary};if(p.isValidElement(r))c=r;else if(typeof n=="function")c=n(l);else if(s)c=p.createElement(s,l);else throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return p.createElement(w.Provider,{value:{didCatch:o,error:a,resetErrorBoundary:this.resetErrorBoundary}},c)}}function I(i=[],t=[]){return i.length!==t.length||i.some((n,s)=>!Object.is(n,t[s]))}function B({error:i,resetErrorBoundary:t}){function n(){localStorage.removeItem("backup-main"),localStorage.removeItem("backup-broadcasters"),localStorage.removeItem("backup-entry"),localStorage.removeItem("backup-users"),t()}return e.jsxs("div",{style:{width:"100%",background:"var(--pastel-red)",padding:"2rem",borderRadius:"1rem",border:"1px solid red"},children:[e.jsxs("p",{children:["Something went wrong: ",i.message]}),e.jsxs("p",{children:["If you have time, please report this bug to me on Discord: ",e.jsx("div",{className:"tag",children:".gabys"})," with a short description of what you did before it happened"]}),e.jsx("p",{children:"You can try clearing your backups to see if that solves the issue. All progress saved in the backups will be lost forever"}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{className:"button is-primary",onClick:t,children:"Refresh"}),e.jsx("button",{className:"button is-danger",onClick:n,children:"Clear Backups"})]})]})}function X({users:i,setUsers:t,showOutput:n}){const[s,r]=p.useState("edit");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"box",children:e.jsx("div",{className:"tabs is-centered",children:e.jsxs("ul",{className:"ml-0",children:[e.jsx("li",{className:s==="edit"?"is-active":"",children:e.jsx("a",{onClick:()=>r("edit"),children:"Edit User"})}),e.jsx("li",{className:s==="new"?"is-active":"",children:e.jsx("a",{onClick:()=>r("new"),children:"New User"})}),n?e.jsx("li",{className:s==="output"?"is-active":"",children:e.jsx("a",{onClick:()=>r("output"),children:"Output"})}):""]})})}),e.jsxs(S,{FallbackComponent:B,children:[s==="new"?e.jsx(y,{addUser:o=>t([...i,o])}):"",s==="edit"?e.jsx(E,{users:i,setUsers:t}):"",s==="output"?e.jsx(b,{data:i}):""]})]})}export{B,S as E,K as I,L,R as T,X as U,T as a};
