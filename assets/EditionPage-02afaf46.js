import{j as s,r as h,L as S,u as w}from"./index-2e5d3364.js";import{a as T}from"./roesc-b16d1972.js";import{g as E}from"./fetchData-50048a02.js";import{p as A,M as m}from"./Markdown-c5df2fd4.js";import{T as g}from"./Table-dd595d29.js";import{O as P}from"./OutLink-46edd8d0.js";import{T as p,C as x,M}from"./Media-050e0f61.js";import{g as v,f as k}from"./utils-db9b6197.js";import{M as C}from"./MediaSection-a48a39fb.js";import{s as u,v as D}from"./votingMethods-1f1ec856.js";import{U as N}from"./UsersString-422bd31d.js";import{g as L}from"./broadcasters-690830cb.js";import"./countryList-2a07b954.js";import"./users-bd952676.js";function y({data:i,titleOnly:l}){const e=l?i.title:`${i.artists.join(", ")} - ${i.title}`;return s.jsx("span",{children:s.jsx(P,{to:i.link,children:e})})}function R({ids:i}){const[l,e]=h.useState([]);return h.useEffect(()=>{const r=i.filter(t=>!!t).map(t=>L(t));Promise.all(r).then(t=>{e(t.map((n,d)=>s.jsxs(S,{to:`/broadcasters/${n.link}`,children:[n.name,d===t.length-1?"":", "]},n.id)))})},[i]),l}function $({data:i,roescData:l}){return s.jsx("div",{className:"table-container sideTable",style:{float:"right",marginLeft:"1rem"},children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable",children:[s.jsx("thead",{children:s.jsx("tr",{style:{textAlign:"center"},children:s.jsxs("th",{colSpan:2,children:[l.name," ",i.edition]})})}),s.jsxs("tbody",{children:[v(i.media,"logos").length>0?s.jsx("tr",{children:s.jsx("td",{colSpan:2,children:s.jsx(C,{link:v(i.media,"logos")[0].link})})}):"",s.jsxs("tr",{children:[s.jsx("th",{children:"Presenters"}),s.jsx("td",{children:i.presenters.map((e,r)=>s.jsxs("span",{children:[e.name," ",e.id&&s.jsxs("span",{children:["(",s.jsx(N,{userids:[e.id]}),")"]}),s.jsx("br",{})]},r))})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Broadcaster"}),s.jsx("td",{children:s.jsx(R,{ids:i.broadcasters})})]}),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Dates"})}),i.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:u[e.id]}),s.jsx("td",{children:A(e.date)})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Opening Acts"})}),i.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:u[e.id]}),s.jsx("td",{children:e.openings.map((r,t)=>s.jsxs("div",{children:[s.jsx(y,{data:r}),s.jsx("br",{})]},t))})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Interval Acts"})}),i.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:u[e.id]}),s.jsx("td",{children:e.intervals.map((r,t)=>s.jsxs("div",{children:[s.jsx(y,{data:r}),s.jsx("br",{})]},t))})]},e.id))]})]})})}function B(i,l){var d;const e=l.votingMethod,r=(d=D.find(a=>a.value===e))==null?void 0:d.points[0],t=[];i.entries.forEach(a=>{const c=a.shows.find(o=>o.id===l.id);if(c&&c.votes&&c.votes[0]){const o=c.votes[0],j=t.find(f=>f.country=o);j?j.givers.push(a.country):t.push({country:o,givers:[a.country]})}});const n={maxPoints:r,getters:t};return console.log(n),n}function O({data:i,show:l}){const e=B(i,l);return s.jsx(p,{children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable is-narrow",style:{width:"inherit"},children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"N."}),s.jsx("th",{children:"Contestant"}),s.jsxs("th",{children:["Nation(s) giving ",e.maxPoints," points"]})]})}),s.jsx("tbody",{children:e.getters.map((r,t)=>s.jsxs("tr",{children:[s.jsx("th",{children:r.givers.length}),s.jsx("td",{children:s.jsx(x,{id:r.country})}),s.jsx("td",{children:r.givers.map((n,d)=>s.jsx(x,{id:n},d))})]},t))})]})})}function q(i,l){const e=[];return i.entries.forEach(r=>{const t=r.shows.find(n=>n.id===l);if(t){let n="";t.qualified&&(n="selected"),l==="gf"&&(console.log(t),t.place===1?n="firstplace":t.place===2?n="secondplace":t.place===3&&(n="thirdplace")),e.push({ro:t.order,country:r.country,participant:r.hods,song:r.song,place:t.place,points:t.points.total,qualified:t.qualified,className:n})}}),e.sort((r,t)=>r.ro-t.ro),e}function I({show:i,data:l}){return s.jsx(p,{children:s.jsx("div",{className:"my-5",children:s.jsx(g,{columns:["Order","Country","Participant","Artist","Song","Place","Points"],smallFirst:!0,compact:!0,children:q(l,i).map((e,r)=>s.jsxs("tr",{className:e.className,children:[s.jsx("td",{style:{textAlign:"center"},children:k(e.ro)}),s.jsx("td",{children:s.jsx(x,{id:e.country})}),s.jsx("td",{children:s.jsx(N,{userids:e.participant})}),s.jsx("td",{children:e.song.artists}),s.jsx("td",{children:s.jsx(y,{data:e.song,titleOnly:!0})}),s.jsx("td",{children:e.place}),s.jsx("td",{children:e.points})]},r))})})})}function b(i,l,e){const r=[];return i.entries.forEach(t=>{const n=t.shows.find(d=>d.id===l);if(n){let d="";n.qualified&&(d="selected"),r.push({country:t.country,juryPoints:n.points.jury,telePoints:n.points.tele,className:d})}}),r.sort((t,n)=>t[e]-n[e]),r}function F({show:i,data:l}){const e=b(l,i,"juryPoints"),r=b(l,i,"teleSorted");return s.jsx(p,{children:s.jsx("div",{className:"my-5",children:s.jsx("div",{className:"table-container",children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable is-narrow",style:{width:"inherit"},children:[s.jsxs("thead",{children:[s.jsx("tr",{children:s.jsx("th",{style:{textAlign:"center"},colSpan:5,children:"Split Results"})}),s.jsxs("tr",{style:{textAlign:"center"},children:[s.jsx("th",{rowSpan:2,children:"Place"}),s.jsx("th",{colSpan:2,children:"Jury"}),s.jsx("th",{colSpan:2,children:"Televoting"})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Country"}),s.jsx("th",{children:"Points"}),s.jsx("th",{children:"Country"}),s.jsx("th",{children:"Points"})]})]}),s.jsx("tbody",{children:e.map((t,n)=>s.jsxs("tr",{children:[s.jsx("th",{style:{textAlign:"center"},children:n+1}),s.jsx("td",{children:s.jsx(x,{id:t.country})}),s.jsx("td",{children:t.juryPoints}),s.jsx("td",{children:s.jsx(x,{id:r[n].country})}),s.jsx("td",{children:r[n].telePoints})]},n))})]})})})})}function G({data:i,show:l}){return s.jsxs("div",{className:"mb-5",children:[s.jsx("h2",{children:u[l.id]}),s.jsx(m,{value:l.textContent}),s.jsx(I,{data:i,show:l.id}),s.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-around",flexWrap:"wrap"},children:[s.jsx(F,{data:i,show:l.id}),s.jsx(O,{data:i,show:l})]})]})}function ts(){const{roesc:i,edition:l}=w(),[e,r]=h.useState(),[t,n]=h.useState(),[d,a]=h.useState("");return h.useEffect(()=>{T(i,l).then(c=>r(c)).catch(c=>a(c)),E(i).then(c=>n(c)).catch(()=>{})},[i,l]),!e||!t?s.jsx("h1",{children:"Loading..."}):d?s.jsxs("h1",{children:["Error: ",d]}):s.jsxs("div",{children:[s.jsx("h1",{children:e.fullName}),s.jsx("hr",{}),s.jsx($,{data:e,roescData:t}),s.jsx(m,{value:e.textContent}),s.jsx("h1",{children:"Location"}),s.jsx("hr",{}),s.jsx(m,{value:e.biddingText}),s.jsx(g,{columns:["City","Venue","Notes"],children:e.bidding.map((c,o)=>s.jsxs("tr",{className:c.won?"selected":"",children:[s.jsx("td",{children:c.city}),s.jsx("td",{children:s.jsx(P,{to:c.link,children:c.venue})}),s.jsx("td",{children:c.notes})]},o))}),s.jsx("h1",{children:"Semi-Final Allocation Draw"}),s.jsx("hr",{}),s.jsx(m,{value:e.sfDrawText}),s.jsx(p,{children:s.jsx(g,{columns:e.sfDraw.map((c,o)=>`Pot ${o+1}`),children:s.jsx("tr",{children:e.sfDraw.map((c,o)=>s.jsx("td",{children:s.jsx("ul",{style:{marginTop:0},children:c.map((j,f)=>s.jsx("li",{children:s.jsx(x,{id:j})},f))})},o))})})}),s.jsx("h1",{children:"Shows"}),s.jsx("hr",{}),e.shows.map(c=>s.jsx(G,{show:c,data:e},c.id)),s.jsx("div",{style:{marginTop:"2rem"}}),s.jsx(M,{media:e.media}),s.jsx("hr",{style:{clear:"both"}}),s.jsx(S,{to:`/editor/edition/existing/${t.link}/${e.link}`,className:"button is-primary is-outlined",children:"Edit This Page"})]})}export{ts as default};
