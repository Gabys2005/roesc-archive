import{j as s,r as d,L as u,u as E}from"./index-53095592.js";import{a as y}from"./roesc-15e6c750.js";import{g as N}from"./fetchData-da7589ef.js";import{p as w,M as h}from"./Markdown-a71b809b.js";import{T as j}from"./Table-b7b3513c.js";import{O as f}from"./OutLink-19f03da7.js";import{T as g,C as S,M as P}from"./Media-1606f0ea.js";import{g as p}from"./utils-197843b4.js";import{M as A}from"./MediaSection-a1f2ab13.js";import{s as x}from"./showList-162192a9.js";import{U as b}from"./UsersString-7a71f4e2.js";import{g as L}from"./broadcasters-b685ec94.js";import"./countryList-2a07b954.js";import"./users-ff76e958.js";function m({data:r,titleOnly:l}){const e=l?r.title:`${r.artists.join(", ")} - ${r.title}`;return s.jsx("span",{children:s.jsx(f,{to:r.link,children:e})})}function M({ids:r}){const[l,e]=d.useState([]);return d.useEffect(()=>{const i=r.filter(t=>!!t).map(t=>L(t));Promise.all(i).then(t=>{e(t.map((c,o)=>s.jsxs(u,{to:`/broadcasters/${c.link}`,children:[c.name,o===t.length-1?"":", "]},c.id)))})},[r]),l}function B({data:r,roescData:l}){return s.jsx("div",{className:"table-container sideTable",style:{float:"right",marginLeft:"1rem"},children:s.jsxs("table",{className:"table is-bordered is-striped is-hoverable",children:[s.jsx("thead",{children:s.jsx("tr",{style:{textAlign:"center"},children:s.jsxs("th",{colSpan:2,children:[l.name," ",r.edition]})})}),s.jsxs("tbody",{children:[p(r.media,"logos").length>0?s.jsx("tr",{children:s.jsx("td",{colSpan:2,children:s.jsx(A,{link:p(r.media,"logos")[0].link})})}):"",s.jsxs("tr",{children:[s.jsx("th",{children:"Presenters"}),s.jsx("td",{children:r.presenters.map((e,i)=>s.jsxs("span",{children:[e.name," ",e.id&&s.jsxs("span",{children:["(",s.jsx(b,{userids:[e.id]}),")"]}),s.jsx("br",{})]},i))})]}),s.jsxs("tr",{children:[s.jsx("th",{children:"Broadcaster"}),s.jsx("td",{children:s.jsx(M,{ids:r.broadcasters})})]}),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Dates"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:x[e.id]}),s.jsx("td",{children:w(e.date)})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Opening Acts"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:x[e.id]}),s.jsx("td",{children:e.openings.map((i,t)=>s.jsxs("div",{children:[s.jsx(m,{data:i}),s.jsx("br",{})]},t))})]},e.id)),s.jsx("tr",{style:{textAlign:"center"},children:s.jsx("th",{colSpan:2,children:"Interval Acts"})}),r.shows.map(e=>s.jsxs("tr",{children:[s.jsx("th",{children:x[e.id]}),s.jsx("td",{children:e.intervals.map((i,t)=>s.jsxs("div",{children:[s.jsx(m,{data:i}),s.jsx("br",{})]},t))})]},e.id))]})]})})}function C(r,l){const e=[];return r.entries.forEach(i=>{const t=i.shows.find(c=>c.id===l);if(t){let c="";t.qualified&&(c="selected"),l==="gf"&&(console.log(t),t.place===1?c="firstplace":t.place===2?c="secondplace":t.place===3&&(c="thirdplace")),e.push({ro:t.order,country:i.country,participant:i.hods,song:i.song,place:t.place,points:t.points.total,qualified:t.qualified,className:c})}}),e.sort((i,t)=>i.ro-t.ro),e}function D({show:r,data:l}){return s.jsx(g,{children:s.jsx("div",{className:"mb-5",children:s.jsx(j,{columns:["Order","Country","Participant","Artist","Song","Place","Points"],smallFirst:!0,children:C(l,r).map((e,i)=>s.jsxs("tr",{className:e.className,children:[s.jsx("td",{children:e.ro}),s.jsx("td",{children:s.jsx(S,{id:e.country})}),s.jsx("td",{children:s.jsx(b,{userids:e.participant})}),s.jsx("td",{children:e.song.artists}),s.jsx("td",{children:s.jsx(m,{data:e.song,titleOnly:!0})}),s.jsx("td",{children:e.place}),s.jsx("td",{children:e.points})]},i))})})})}function $({data:r,show:l}){return s.jsxs("div",{children:[s.jsx("h2",{children:x[l.id]}),s.jsx("p",{children:"text text text"}),s.jsx(D,{data:r,show:l.id})]})}function W(){const{roesc:r,edition:l}=E(),[e,i]=d.useState(),[t,c]=d.useState(),[o,v]=d.useState("");return d.useEffect(()=>{y(r,l).then(n=>i(n)).catch(n=>v(n)),N(r).then(n=>c(n)).catch(()=>{})},[r,l]),!e||!t?s.jsx("h1",{children:"Loading..."}):o?s.jsxs("h1",{children:["Error: ",o]}):s.jsxs("div",{children:[s.jsx("h1",{children:e.fullName}),s.jsx("hr",{}),s.jsx(B,{data:e,roescData:t}),s.jsx(h,{value:e.textContent}),s.jsx("h1",{children:"Location"}),s.jsx("hr",{}),s.jsx(h,{value:e.biddingText}),s.jsx(j,{columns:["City","Venue","Notes"],children:e.bidding.map((n,a)=>s.jsxs("tr",{className:n.won?"selected":"",children:[s.jsx("td",{children:n.city}),s.jsx("td",{children:s.jsx(f,{to:n.link,children:n.venue})}),s.jsx("td",{children:n.notes})]},a))}),s.jsx("h1",{children:"Semi-Final Allocation Draw"}),s.jsx("hr",{}),s.jsx(h,{value:e.sfDrawText}),s.jsx(g,{children:s.jsx(j,{columns:e.sfDraw.map((n,a)=>`Pot ${a+1}`),children:s.jsx("tr",{children:e.sfDraw.map((n,a)=>s.jsx("td",{children:s.jsx("ul",{style:{marginTop:0},children:n.map((T,k)=>s.jsx("li",{children:s.jsx(S,{id:T})},k))})},a))})})}),s.jsx("h1",{children:"Shows"}),s.jsx("hr",{}),e.shows.map(n=>s.jsx($,{show:n,data:e},n.id)),s.jsx("div",{style:{marginTop:"2rem"}}),s.jsx(P,{media:e.media}),s.jsx("hr",{style:{clear:"both"}}),s.jsx(u,{to:`/editor/edition/existing/${t.link}/${e.link}`,className:"button is-primary is-outlined",children:"Edit This Page"})]})}export{W as default};
