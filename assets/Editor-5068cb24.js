import{r as m,j as e,E as F}from"./index-7eefb166.js";import{c as L}from"./users-8a83242f.js";import{b as J}from"./fetchData-6dc11da3.js";import{E as b,B as k,T as E,L as D,a as I,U as W}from"./Editor-069e07f0.js";import{B as h,c as x,M as U,b as C,T as v,D as M,I as R}from"./Output-215dc2af.js";import{I as O}from"./Inputs-ae541765.js";import{a as T,v as X}from"./v4-872b0555.js";import{a as A,b as f,s as _}from"./countryList-da3e760e.js";import{U as H}from"./UserList-66662850.js";import{d as N}from"./utils-4982e13e.js";import{T as $}from"./Table-adce74ca.js";function z({users:n,addBroadcaster:a}){const t=localStorage.getItem("backup-broadcaster"),[s,i]=m.useState(t?JSON.parse(t):T);return m.useEffect(()=>{localStorage.setItem("backup-broadcaster",JSON.stringify(s))},[s]),e.jsxs("div",{children:[e.jsx(O,{users:n,data:s,setData:(r,o)=>i({...s,[r]:o})}),e.jsx("div",{className:"box",children:e.jsx(h,{onClick:()=>{a({id:X(),name:s.name,shortName:s.shortName,link:s.link,created:s.created,closed:s.closed,links:s.links,logos:s.logos,owners:s.owners,staff:s.staff,textContent:s.textContent}),i(T)},children:"Create Broadcaster"})})]})}function Y({broadcasters:n,setBroadcasters:a,users:t}){var o;const[s,i]=m.useState((o=n[0])==null?void 0:o.id),r=n.map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.shortName,")"]},l.id));return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx(x,{name:"Choose a broadcaster to edit",children:e.jsx("div",{className:"select is-fullwidth",children:e.jsx("select",{value:s,onChange:l=>i(l.target.value),children:r})})})}),e.jsx(O,{data:n.find(l=>l.id===s),setData:(l,c)=>a(n.map(d=>d.id===s?{...d,[l]:c}:d)),users:t})]})}function G({broadcasters:n,setBroadcasters:a,users:t}){const s=[{name:"Edit Broadcasters",component:e.jsx(Y,{broadcasters:n,setBroadcasters:a,users:t})},{name:"New Broadcaster",component:e.jsx(z,{users:t,addBroadcaster:o=>a([...n,o])})}],[i,r]=m.useState(s[0].name);return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx("div",{className:"tabs is-centered",children:e.jsx("ul",{className:"ml-0",children:s.map(o=>e.jsx("li",{className:i===o.name?"is-active":"",children:e.jsx("a",{onClick:()=>o.name!=="|"&&r(o.name),children:o.name})},o.name))})})}),e.jsx(b,{FallbackComponent:k,children:s.find(o=>o.name===i).component})]})}function q({broadcasters:n,value:a,setValue:t,name:s,description:i}){return e.jsxs("div",{children:[e.jsx(x,{name:s,description:i,children:a.map((r,o)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:r,onChange:l=>t(a.map((c,d)=>d!==o?c:l.target.value)),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),n.sort((l,c)=>l.name.localeCompare(c.name)).map(l=>e.jsxs("option",{value:l.id,children:[l.name," (",l.shortName,")"]},l.id))]})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>t(a.filter((l,c)=>o!==c)),children:"X"})})]},o))}),e.jsx(h,{onClick:()=>t([...a,""]),children:"Add Another"})]})}function w({checked:n,onChange:a,label:t,size:s,border:i}){const r=s==="small"?"is-small":"",o=i?"input":"";return e.jsxs("label",{className:`b-checkbox checkbox ${o} ${r}`,children:[e.jsx("input",{type:"checkbox",checked:n,onChange:l=>a(l.target.checked)}),e.jsx("span",{className:"check"}),e.jsx("span",{className:"control-label",children:t})]})}function y({name:n,description:a,value:t,setValue:s,buttonText:i,multiple:r}){return r?e.jsxs(x,{name:n,description:a,children:[t.map((o,l)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"select control is-fullwidth",children:e.jsxs("select",{value:o,onChange:c=>s(t.map((d,j)=>l!==j?d:c.target.value)),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),A.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>s(t.filter((c,d)=>l!==d)),children:"X"})})]},l)),e.jsx(h,{onClick:()=>s([...t,""]),children:i||"Add Another"})]}):e.jsx(x,{name:n,description:a,children:e.jsx("div",{className:"select control is-fullwidth",children:e.jsxs("select",{value:t,onChange:o=>s(o.target.value),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),A.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})})})}function K({value:n,setValue:a,name:t,description:s,users:i}){function r(o,l,c){a(n.map((d,j)=>o!==j?d:{...d,[l]:c}))}return e.jsxs(x,{name:t,description:s,children:[n.map((o,l)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:o.name,onChange:c=>r(l,"name",c.target.value),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsxs("label",{className:"b-checkbox checkbox input",children:[e.jsx("input",{type:"checkbox",checked:o.bot,onChange:c=>r(l,"bot",c.target.checked)}),e.jsx("span",{className:"check"}),e.jsx("span",{className:"control-label",children:"Bot?"})]})}),e.jsx(H,{users:i,value:o.id,setValue:c=>r(l,"id",c),disabled:o.bot}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>a(n.filter((c,d)=>d!==l)),children:"X"})})]},l)),e.jsx(h,{onClick:()=>a([...n,{name:"",bot:!1,id:""}]),children:"Add Another"})]})}function Q({name:n,description:a,value:t,setValue:s}){function i(r,o,l){s(t.map((c,d)=>r!==d?c:{...c,[o]:l}))}return e.jsxs(x,{name:n,description:a,children:[t.map((r,o)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:r.name,onChange:l=>i(o,"name",l.target.value),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:r.city,onChange:l=>i(o,"city",l.target.value),placeholder:"City"})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:r.link,onChange:l=>i(o,"link",l.target.value),placeholder:"Wikipedia link"})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>s(t.filter((l,c)=>c!==o)),children:"X"})})]},o)),e.jsx(h,{onClick:()=>s([...t,{name:"",city:"",link:""}]),children:"Add Another"})]})}function Z({data:n,setValue:a,users:t,broadcasters:s}){return e.jsxs("div",{className:"box",children:[e.jsx(E,{name:"Edition Name",description:"Generally the number, for example: #04 or WC #01",value:n.edition,setValue:i=>a("edition",i)}),e.jsx(E,{name:"Link",description:"Generally the name from above, but without any special characters, for example: 04, wc_01 or 15_2021",value:n.link,setValue:i=>a("link",i)}),e.jsx(x,{name:"Edition Cancelled",description:"Check this box if the edition was cancelled / was later restarted from scratch",children:e.jsx(w,{label:"Cancelled",checked:n.cancelled,onChange:i=>a("cancelled",i)})}),e.jsx("hr",{}),e.jsx(U,{name:"Slogan(s)",description:"Slogan(s) used for this edition",value:n.slogans,setValue:i=>a("slogans",i)}),e.jsx("hr",{}),e.jsx(y,{name:"Host Countries",description:"Country or countries that hosted this edition",value:n.countries,setValue:i=>a("countries",i),multiple:!0}),e.jsx("hr",{}),e.jsx(Q,{name:"Host Venue(s)",description:"City or cities that hosted this edition",value:n.venues,setValue:i=>a("venues",i)}),e.jsx("hr",{}),e.jsx(K,{name:"Presenter(s)",description:"People that hosted the show",value:n.presenters,setValue:i=>a("presenters",i),users:t}),e.jsx("hr",{}),e.jsx(D,{name:"Links",description:"Links to that edition's Roblox game, official wiki page, etc.",value:n.links,setValue:i=>a("links",i)}),e.jsx("hr",{}),e.jsx(q,{name:"Broadcaster(s)",description:"Broadcasters that livestreamed the show",value:n.broadcasters,setValue:i=>a("broadcasters",i),broadcasters:s}),e.jsx("hr",{}),e.jsx(x,{name:"Primary written content",description:"This text will appear at the very top of this edition's page. You can find content boxes for individual sections in their tabs",children:e.jsx(C,{value:n.textContent,setValue:i=>a("textContent",i)})})]})}function V({data:n,users:a,broadcasters:t}){return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx("p",{children:"Download both of the files below and send them as attachments in the thread of this RoESC in the #roesc-archive channel"})}),e.jsxs("div",{className:"columns",children:[e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Edition File"}),e.jsx(v,{disabled:!0,value:JSON.stringify(n,null,4),className:"mb-2"}),e.jsx(h,{onClick:()=>N(n,n.link),children:"Download"})]})}),e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Users File"}),e.jsx(v,{disabled:!0,value:JSON.stringify(a,null,4),className:"mb-2"}),e.jsx(h,{onClick:()=>N(a,"users"),children:"Download"})]})}),e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Broadcasters File"}),e.jsx(v,{disabled:!0,value:JSON.stringify(t,null,4),className:"mb-2"}),e.jsx(h,{onClick:()=>N(t,"broadcasters"),children:"Download"})]})})]})]})}function ee({data:n,setValue:a}){function t(s,i,r){a("bidding",n.bidding.map((o,l)=>s!==l?o:{...o,[i]:r}))}return e.jsxs("div",{className:"box",children:[e.jsxs(x,{name:"Bidding Table",description:"TODO: add description here",children:[e.jsx($,{columns:["City","Venue","Notes","Wikipedia link","Won?",""],children:n.bidding.map((s,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:s.city,onChange:r=>t(i,"city",r.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:s.venue,onChange:r=>t(i,"venue",r.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:s.notes,onChange:r=>t(i,"notes",r.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:s.link,onChange:r=>t(i,"link",r.target.value)})}),e.jsx("td",{children:e.jsx(w,{size:"small",border:!0,checked:s.won,onChange:r=>t(i,"won",r)})}),e.jsx("td",{children:e.jsx(h,{color:"danger",size:"small",onClick:()=>a("bidding",n.bidding.filter((r,o)=>i!==o)),children:"X"})})]},i))}),e.jsx(h,{onClick:()=>a("bidding",[...n.bidding,{city:"",venue:"",notes:"",link:"",won:!1}]),children:"Add Another Row"})]}),e.jsx(x,{name:"Written Content",description:"",children:e.jsx(C,{value:n.biddingText,setValue:s=>a("biddingText",s)})})]})}function se({data:n,setValue:a}){function t(s,i){a("media",n.media.map(r=>r.name===s?{...r,images:i}:r))}return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:"Remember to include any new images you add in your message on the Discord server. File Name is used only to make it easier for me to differentiate between files, please write the name of the file there (for example venue.png)"}),e.jsx("div",{className:"box",children:e.jsx(D,{name:"Logos",description:"Logos made for this edition. First logo will be used in the side table",value:n.media.find(s=>s.name==="logos").images,setValue:s=>t("logos",s),namePlaceholder:"Description",linkPlaceholder:"File Name"})})]})}function ne({data:n,setValue:a}){return e.jsxs("div",{className:"box",children:[n.sfDraw.map((t,s)=>e.jsxs("div",{children:[e.jsx(y,{name:`Pot ${s+1}`,value:t,setValue:i=>a("sfDraw",n.sfDraw.map((r,o)=>s!==o?r:i)),multiple:!0,buttonText:"Add Another Country"}),e.jsx(h,{color:"danger",onClick:()=>a("sfDraw",n.sfDraw.filter((i,r)=>s!==r)),children:"Remove Pot"}),e.jsx("br",{}),e.jsx("br",{})]},s)),e.jsx("br",{}),e.jsx(h,{onClick:()=>a("sfDraw",[...n.sfDraw,[]]),children:"Add Another Pot"}),e.jsx("hr",{}),e.jsx(x,{name:"Written content",children:e.jsx(C,{value:n.sfDrawText,setValue:t=>a("sfDrawText",t)})})]})}function g({value:n,setValue:a,name:t,description:s,multiple:i}){function r(l,c,d){a(n.map((j,p)=>l!==p?j:{...j,[c]:d}))}function o(l,c){a({...n,[l]:c})}return i?e.jsxs(x,{name:t,description:s,children:[n.map((l,c)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:l.artists.join(", "),placeholder:"Artist",onChange:d=>r(c,"artists",d.target.value.split(", "))})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:l.title,placeholder:"Song",onChange:d=>r(c,"title",d.target.value)})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{type:"url",className:"input",value:l.link,placeholder:"YouTube Link",onChange:d=>r(c,"link",d.target.value)})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>a(n.filter((d,j)=>c!==j)),children:"X"})})]},c)),e.jsx(h,{onClick:()=>a([...n,{artists:[],title:"",link:""}]),children:"Add Another"})]}):e.jsx(x,{name:t,description:s,children:e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:n.artists.join(", "),placeholder:"Artist",onChange:l=>o("artists",l.target.value.split(", "))})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:n.title,placeholder:"Song",onChange:l=>o("title",l.target.value)})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{type:"url",className:"input",value:n.link,placeholder:"YouTube Link",onChange:l=>o("link",l.target.value)})})]})})}function ie({data:n,setValue:a}){return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx(x,{name:"Shows",description:"Which shows were a part of this edition?",children:f.map(t=>e.jsx("div",{children:e.jsx(w,{label:t.name,checked:!!n.shows.find(s=>s.id===t.id),onChange:()=>a("shows",n.shows.find(s=>s.id===t.id)?n.shows.filter(s=>s.id!==t.id):[...n.shows,{id:t.id,date:"",openings:[],intervals:[]}].sort((s,i)=>f.findIndex(r=>r.id===s.id)-f.findIndex(r=>r.id===i.id)))})},t.id))})}),n.shows.map((t,s)=>e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:_[t.id]}),e.jsx(M,{name:"Show Date",description:"When did this show happen?",value:t.date,setValue:i=>a("shows",n.shows.map((r,o)=>s!==o?r:{...r,date:i}))}),e.jsx(g,{name:"Opening Acts",description:"Songs that opened the show",multiple:!0,value:t.openings,setValue:i=>a("shows",n.shows.map((r,o)=>s!==o?r:{...r,openings:i}))}),e.jsx(g,{name:"Interval Acts",description:"Intevals",multiple:!0,value:t.intervals,setValue:i=>a("shows",n.shows.map((r,o)=>s!==o?r:{...r,intervals:i}))})]},t.id))]})}function te({data:n,setData:a,users:t}){return e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"The Basics"}),e.jsx(g,{name:"Song",description:"The song that represented this entry. Separate artists with commas (,)",value:n.song,setValue:s=>a("song",s)}),e.jsx("hr",{}),e.jsx(y,{name:"Country",description:"The country being represented",value:n.country,setValue:s=>a("country",s)}),e.jsx("hr",{}),e.jsx(I,{name:"Heads Of Delegation",description:"People who were chosen as the 'Participants'",value:n.hods,setValue:s=>a("hods",s),users:t,multiple:!0}),e.jsx("hr",{}),e.jsx(I,{name:"Performers",description:"People who performed on stage",value:n.performers,setValue:s=>a("performers",s),users:t,multiple:!0})]})}const B={country:"",hods:[],performers:[],song:{artists:[],title:"",link:""}};function ae({data:n,setValue:a,users:t}){const s=localStorage.getItem("backup-entry"),[i,r]=m.useState(JSON.parse(s)||B);function o(){a("entries",[...n.entries,i]),r(B)}return m.useEffect(()=>{localStorage.setItem("backup-entry",JSON.stringify(i))},[i]),e.jsxs("div",{children:[e.jsx(te,{data:i,setData:(l,c)=>r({...i,[l]:c}),users:t}),e.jsx("div",{className:"box",children:e.jsx(h,{onClick:o,children:"Add Entry"})})]})}function le({data:n,setValue:a,users:t}){const[s,i]=m.useState("new");return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx("div",{className:"tabs is-centered",children:e.jsxs("ul",{children:[e.jsx("li",{className:s==="edit"?"is-active":"",children:e.jsx("a",{onClick:()=>i("edit"),children:"Edit Entry"})}),e.jsx("li",{className:s==="new"?"is-active":"",children:e.jsx("a",{onClick:()=>i("new"),children:"New Entry"})})]})})}),e.jsx(b,{FallbackComponent:k,children:s==="new"&&e.jsx(ae,{data:n,setValue:a,users:t})})]})}function fe({initialData:n,name:a,initialUsers:t}){const[s,i]=m.useState(n),[r,o]=m.useState("Info"),[l,c]=m.useState(t||[]),[d,j]=m.useState([]);m.useEffect(()=>{t||L().then(u=>c(u))},[t]),m.useEffect(()=>{J().then(u=>j(u))},[]);function p(u,P){i({...s,[u]:P})}m.useEffect(()=>{localStorage.setItem("backup-edition",JSON.stringify(s))},[s]);const S=[{name:"Info",component:e.jsx(R,{})},{name:"Basic Information",component:e.jsx(Z,{data:s,setValue:p,users:l,broadcasters:d})},{name:"Location",component:e.jsx(ee,{data:s,setValue:p})},{name:"Shows",component:e.jsx(ie,{data:s,setValue:p})},{name:"SF Draw",component:e.jsx(ne,{data:s,setValue:p})},{name:"Entries",component:e.jsx(le,{data:s,setValue:p,users:l})},{name:"Media",component:e.jsx(se,{data:s,setValue:p})},{name:"Output",component:e.jsx(V,{data:s,users:l,broadcasters:d})},{name:"|",component:e.jsx(F,{})},{name:"Users Editor",component:e.jsx(W,{users:l,setUsers:c})},{name:"Broadcasters Editor",component:e.jsx(G,{broadcasters:d,setBroadcasters:j,users:l,embedded:!0})}];return e.jsxs("div",{children:[e.jsxs("h1",{children:["Editing Edition File - ",a]}),e.jsx("div",{className:"tabs is-centered is-boxed",children:e.jsx("ul",{className:"ml-0",children:S.map(u=>e.jsx("li",{className:r===u.name?"is-active":"",children:e.jsx("a",{onClick:()=>u.name!=="|"&&o(u.name),children:u.name})},u.name))})}),e.jsx(b,{FallbackComponent:k,children:S.find(u=>u.name===r).component})]})}export{fe as E};
