import{r as x,j as e,E as J}from"./index-f9fdc040.js";import{c as R}from"./users-f6f7b96c.js";import{b as U}from"./fetchData-d596981c.js";import{E,B as T,T as N,L as O,a as b,U as X}from"./Editor-2e020be7.js";import{B as h,c as m,M as _,b as g,T as C,D as H,I as $}from"./Output-8c2a38f0.js";import{I as M}from"./Inputs-fa2287d0.js";import{a as P,v as z}from"./v4-872b0555.js";import{a as w,g as Y}from"./countryList-2a07b954.js";import{U as q}from"./UserList-fe873620.js";import{d as k}from"./utils-d4abb36f.js";import{T as G}from"./Table-b45b097f.js";import{a as y,s as W,b as Q}from"./showList-162192a9.js";function K({users:l,addBroadcaster:a}){const o=localStorage.getItem("backup-broadcaster"),[n,i]=x.useState(o?JSON.parse(o):P);return x.useEffect(()=>{localStorage.setItem("backup-broadcaster",JSON.stringify(n))},[n]),e.jsxs("div",{children:[e.jsx(M,{users:l,data:n,setData:(s,t)=>i({...n,[s]:t})}),e.jsx("div",{className:"box",children:e.jsx(h,{onClick:()=>{a({id:z(),name:n.name,shortName:n.shortName,link:n.link,created:n.created,closed:n.closed,links:n.links,logos:n.logos,owners:n.owners,staff:n.staff,textContent:n.textContent}),i(P)},children:"Create Broadcaster"})})]})}function Z({broadcasters:l,setBroadcasters:a,users:o}){var t;const[n,i]=x.useState((t=l[0])==null?void 0:t.id),s=l.map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",r.shortName,")"]},r.id));return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx(m,{name:"Choose a broadcaster to edit",children:e.jsx("div",{className:"select is-fullwidth",children:e.jsx("select",{value:n,onChange:r=>i(r.target.value),children:s})})})}),e.jsx(M,{data:l.find(r=>r.id===n),setData:(r,d)=>a(l.map(c=>c.id===n?{...c,[r]:d}:c)),users:o})]})}function ee({broadcasters:l,setBroadcasters:a,users:o}){const n=[{name:"Edit Broadcasters",component:e.jsx(Z,{broadcasters:l,setBroadcasters:a,users:o})},{name:"New Broadcaster",component:e.jsx(K,{users:o,addBroadcaster:t=>a([...l,t])})}],[i,s]=x.useState(n[0].name);return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx("div",{className:"tabs is-centered",children:e.jsx("ul",{className:"ml-0",children:n.map(t=>e.jsx("li",{className:i===t.name?"is-active":"",children:e.jsx("a",{onClick:()=>t.name!=="|"&&s(t.name),children:t.name})},t.name))})})}),e.jsx(E,{FallbackComponent:T,children:n.find(t=>t.name===i).component})]})}function se({broadcasters:l,value:a,setValue:o,name:n,description:i}){return e.jsxs("div",{children:[e.jsx(m,{name:n,description:i,children:a.map((s,t)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:s,onChange:r=>o(a.map((d,c)=>c!==t?d:r.target.value)),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),l.sort((r,d)=>r.name.localeCompare(d.name)).map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",r.shortName,")"]},r.id))]})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>o(a.filter((r,d)=>t!==d)),children:"X"})})]},t))}),e.jsx(h,{onClick:()=>o([...a,""]),children:"Add Another"})]})}function j({checked:l,onChange:a,label:o,size:n,border:i}){const s=n==="small"?"is-small":"",t=i?"input":"";return e.jsxs("label",{className:`b-checkbox checkbox ${t} ${s}`,children:[e.jsx("input",{type:"checkbox",checked:l,onChange:r=>a(r.target.checked)}),e.jsx("span",{className:"check"}),e.jsx("span",{className:"control-label",children:o})]})}function I({name:l,description:a,value:o,setValue:n,buttonText:i,multiple:s}){return s?e.jsxs(m,{name:l,description:a,children:[o.map((t,r)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"select control is-fullwidth",children:e.jsxs("select",{value:t,onChange:d=>n(o.map((c,p)=>r!==p?c:d.target.value)),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),w.map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))]})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>n(o.filter((d,c)=>r!==c)),children:"X"})})]},r)),e.jsx(h,{onClick:()=>n([...o,""]),children:i||"Add Another"})]}):e.jsx(m,{name:l,description:a,children:e.jsx("div",{className:"select control is-fullwidth",children:e.jsxs("select",{value:o,onChange:t=>n(t.target.value),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),w.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})})}function ne({value:l,setValue:a,name:o,description:n,users:i}){function s(t,r,d){a(l.map((c,p)=>t!==p?c:{...c,[r]:d}))}return e.jsxs(m,{name:o,description:n,children:[l.map((t,r)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:t.name,onChange:d=>s(r,"name",d.target.value),placeholder:"Name"})}),e.jsx("div",{className:"control",children:e.jsxs("label",{className:"b-checkbox checkbox input",children:[e.jsx("input",{type:"checkbox",checked:t.bot,onChange:d=>s(r,"bot",d.target.checked)}),e.jsx("span",{className:"check"}),e.jsx("span",{className:"control-label",children:"Bot?"})]})}),e.jsx(q,{users:i,value:t.id,setValue:d=>s(r,"id",d),disabled:t.bot}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>a(l.filter((d,c)=>c!==r)),children:"X"})})]},r)),e.jsx(h,{onClick:()=>a([...l,{name:"",bot:!1,id:""}]),children:"Add Another"})]})}function ie({name:l,description:a,value:o,setValue:n}){function i(s,t,r){n(o.map((d,c)=>s!==c?d:{...d,[t]:r}))}return e.jsxs(m,{name:l,description:a,children:[o.map((s,t)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:s.name,onChange:r=>i(t,"name",r.target.value),placeholder:"Name"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:s.city,onChange:r=>i(t,"city",r.target.value),placeholder:"City"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("div",{className:"select control is-fullwidth",children:e.jsxs("select",{value:o.country,onChange:r=>i(t,"country",r.target.value),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select Country"}),w.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:s.link,onChange:r=>i(t,"link",r.target.value),placeholder:"Wikipedia link"})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>n(o.filter((r,d)=>d!==t)),children:"X"})})]},t)),e.jsx(h,{onClick:()=>n([...o,{name:"",city:"",link:""}]),children:"Add Another"})]})}function A({value:l,setValue:a,values:o,name:n,description:i}){return e.jsx(m,{name:n,description:i,children:e.jsx("div",{className:"control select is-fullwidth",children:e.jsxs("select",{value:l,onChange:s=>a(s.target.value),children:[e.jsx("option",{default:!0,hidden:!0,children:"Select"}),o.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})})})}const te=[{value:"earthvision",label:"Earthvision"},{value:"eurovision",label:"Eurovision"},{value:"asiavision",label:"Asiavision"},{value:"other",label:"Other (tell me so I can add it to this list)"}];function le({data:l,setValue:a,users:o,broadcasters:n}){return e.jsxs("div",{className:"box",children:[e.jsx(N,{name:"Full Name",description:"Full contest for this edition. For example: Gabys' Eurovision Song Contest #03. This has to be edition specific because the name of a RoESC can change over time",value:l.fullName,setValue:i=>a("fullName",i)}),e.jsx(N,{name:"Edition Number",description:"For example: #04 or WC #01. This will be visible in tables",value:l.edition,setValue:i=>a("edition",i)}),e.jsx(N,{name:"Link",description:"Generally the name from above, but without any special characters, for example: 04, wc_01 or 15_2021",value:l.link,setValue:i=>a("link",i)}),e.jsx(m,{name:"Edition Cancelled",description:"Check this box if the edition was cancelled / was later restarted from scratch",children:e.jsx(j,{label:"Cancelled",checked:l.cancelled,onChange:i=>a("cancelled",i)})}),e.jsx(A,{name:"Edition Type",description:"Was this edition an Earthvision? A Eurovision?",value:l.type,setValue:i=>a("type",i),values:te}),e.jsx("hr",{}),e.jsx(_,{name:"Slogan(s)",description:"Slogan(s) used for this edition",value:l.slogans,setValue:i=>a("slogans",i)}),e.jsx("hr",{}),e.jsx(I,{name:"Host Countries",description:"Country or countries that hosted this edition",value:l.countries,setValue:i=>a("countries",i),multiple:!0}),e.jsx("hr",{}),e.jsx(ie,{name:"Host Venue(s)",description:"Venue(s) that hosted this edition",value:l.venues,setValue:i=>a("venues",i)}),e.jsx("hr",{}),e.jsx(ne,{name:"Presenter(s)",description:"People that hosted the show",value:l.presenters,setValue:i=>a("presenters",i),users:o}),e.jsx("hr",{}),e.jsx(O,{name:"Links",description:"Links to that edition's Roblox game, official wiki page, etc.",value:l.links,setValue:i=>a("links",i)}),e.jsx("hr",{}),e.jsx(se,{name:"Broadcaster(s)",description:"Broadcasters that livestreamed the show",value:l.broadcasters,setValue:i=>a("broadcasters",i),broadcasters:n}),e.jsx("hr",{}),e.jsx(m,{name:"Primary written content",description:"This text will appear at the very top of this edition's page. You can find content boxes for individual sections in their tabs",children:e.jsx(g,{value:l.textContent,setValue:i=>a("textContent",i)})})]})}function ae({data:l,users:a,broadcasters:o}){const n=structuredClone(l);return n.entries=n.entries.map(i=>({...i,shows:i.shows.filter(s=>s.participated||s.shouldveVoted)})),e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx("p",{children:"Download all of the files below and send them as attachments in the thread of this RoESC in the #roesc-archive channel"})}),e.jsxs("div",{className:"columns",children:[e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Edition File"}),e.jsx(C,{disabled:!0,value:JSON.stringify(n,null,4),className:"mb-2"}),e.jsx(h,{onClick:()=>k(n,l.link),children:"Download"})]})}),e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Users File"}),e.jsx(C,{disabled:!0,value:JSON.stringify(a,null,4),className:"mb-2"}),e.jsx(h,{onClick:()=>k(a,"users"),children:"Download"})]})}),e.jsx("div",{className:"column",children:e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"Broadcasters File"}),e.jsx(C,{disabled:!0,value:JSON.stringify(o,null,4),className:"mb-2"}),e.jsx(h,{onClick:()=>k(o,"broadcasters"),children:"Download"})]})})]})]})}function oe({data:l,setValue:a}){function o(n,i,s){a("bidding",l.bidding.map((t,r)=>n!==r?t:{...t,[i]:s}))}return e.jsxs("div",{className:"box",children:[e.jsxs(m,{name:"Bidding Table",children:[e.jsx(G,{columns:["City","Venue","Notes","Wikipedia link","Won?",""],children:l.bidding.map((n,i)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:n.city,onChange:s=>o(i,"city",s.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:n.venue,onChange:s=>o(i,"venue",s.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:n.notes,onChange:s=>o(i,"notes",s.target.value)})}),e.jsx("td",{children:e.jsx("input",{type:"text",className:"input is-small",value:n.link,onChange:s=>o(i,"link",s.target.value)})}),e.jsx("td",{children:e.jsx(j,{size:"small",border:!0,checked:n.won,onChange:s=>o(i,"won",s)})}),e.jsx("td",{children:e.jsx(h,{color:"danger",size:"small",onClick:()=>a("bidding",l.bidding.filter((s,t)=>i!==t)),children:"X"})})]},i))}),e.jsx(h,{onClick:()=>a("bidding",[...l.bidding,{city:"",venue:"",notes:"",link:"",won:!1}]),children:"Add Another Row"})]}),e.jsx(m,{name:"Written Content",description:"",children:e.jsx(g,{value:l.biddingText,setValue:n=>a("biddingText",n)})})]})}function re({data:l,setValue:a}){function o(n,i){a("media",l.media.map(s=>s.name===n?{...s,images:i}:s))}return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:"Remember to include any new images you add in your message on the Discord server."}),e.jsx("div",{className:"box",children:e.jsx(O,{name:"Logos",description:"Logos made for this edition. First logo will be used in the side table",value:l.media.find(n=>n.name==="logos").images,setValue:n=>o("logos",n),namePlaceholder:"Description",linkPlaceholder:"File Name"})})]})}function de({data:l,setValue:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"box",children:[e.jsx("h1",{children:"Pots"}),l.sfDraw.map((o,n)=>e.jsxs("div",{children:[e.jsx(I,{name:`Pot ${n+1}`,value:o,setValue:i=>a("sfDraw",l.sfDraw.map((s,t)=>n!==t?s:i)),multiple:!0,buttonText:"Add Another Country"}),e.jsx(h,{color:"danger",onClick:()=>a("sfDraw",l.sfDraw.filter((i,s)=>n!==s)),children:"Remove Pot"}),e.jsx("br",{}),e.jsx("br",{})]},n)),e.jsx("br",{}),e.jsx(h,{onClick:()=>a("sfDraw",[...l.sfDraw,[]]),children:"Add Another Pot"})]}),e.jsx("div",{className:"box",children:e.jsx(m,{name:"Written content",children:e.jsx(g,{value:l.sfDrawText,setValue:o=>a("sfDrawText",o)})})})]})}function S({value:l,setValue:a,name:o,description:n,multiple:i}){function s(r,d,c){a(l.map((p,v)=>r!==v?p:{...p,[d]:c}))}function t(r,d){a({...l,[r]:d})}return i?e.jsxs(m,{name:o,description:n,children:[l.map((r,d)=>e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:r.artists.join(", "),placeholder:"Artist",onChange:c=>s(d,"artists",c.target.value.split(", "))})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:r.title,placeholder:"Song",onChange:c=>s(d,"title",c.target.value)})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{type:"url",className:"input",value:r.link,placeholder:"YouTube Link",onChange:c=>s(d,"link",c.target.value)})}),e.jsx("div",{className:"control",children:e.jsx(h,{color:"danger",onClick:()=>a(l.filter((c,p)=>d!==p)),children:"X"})})]},d)),e.jsx(h,{onClick:()=>a([...l,{artists:[],title:"",link:""}]),children:"Add Another"})]}):e.jsx(m,{name:o,description:n,children:e.jsxs("div",{className:"field has-addons",children:[e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:l.artists.join(", "),placeholder:"Artist",onChange:r=>t("artists",r.target.value.split(", "))})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{className:"input",type:"text",value:l.title,placeholder:"Song",onChange:r=>t("title",r.target.value)})}),e.jsx("div",{className:"control",children:e.jsx("div",{className:"button is-static",children:"-"})}),e.jsx("div",{className:"control is-expanded",children:e.jsx("input",{type:"url",className:"input",value:l.link,placeholder:"YouTube Link",onChange:r=>t("link",r.target.value)})})]})})}const ce=[{value:"esc",label:"Eurovision Style (12, 10, 8-1 points)",points:[12,10,8,7,6,5,4,3,2,1]}];function he({data:l,setValue:a}){return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx(m,{name:"Shows",description:"Which shows were a part of this edition?",children:y.map(o=>e.jsx("div",{children:e.jsx(j,{label:o.name,checked:!!l.shows.find(n=>n.id===o.id),onChange:()=>a("shows",l.shows.find(n=>n.id===o.id)?l.shows.filter(n=>n.id!==o.id):[...l.shows,{id:o.id,date:"",openings:[],intervals:[]}].sort((n,i)=>y.findIndex(s=>s.id===n.id)-y.findIndex(s=>s.id===i.id)))})},o.id))})}),l.shows.map((o,n)=>e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:W[o.id]}),e.jsx(H,{name:"Show Date",description:"When did this show happen?",value:o.date,setValue:i=>a("shows",l.shows.map((s,t)=>n!==t?s:{...s,date:i}))}),e.jsx(A,{name:"Voting Method",description:"Method used in this show's jury voting",value:o.votingMethod,setValue:i=>a("shows",l.shows.map((s,t)=>n!==t?s:{...s,votingMethod:i})),values:ce}),e.jsx(S,{name:"Opening Acts",description:"Songs that opened the show",multiple:!0,value:o.openings,setValue:i=>a("shows",l.shows.map((s,t)=>n!==t?s:{...s,openings:i}))}),e.jsx(S,{name:"Interval Acts",description:"Intevals",multiple:!0,value:o.intervals,setValue:i=>a("shows",l.shows.map((s,t)=>n!==t?s:{...s,intervals:i}))}),e.jsx(m,{name:"Written Content",description:"This text will be shown above the results table (if there is one)",children:e.jsx(g,{value:o.textContent,setValue:i=>a("shows",l.shows.map((s,t)=>n!==t?s:{...s,textContent:i}))})})]},o.id))]})}function f({name:l,description:a,value:o,setValue:n,margin:i}){function s(t){n(Number(t.target.value.replaceAll("e","").replaceAll(",","")))}return e.jsx("div",{className:i?"mr-3":"",children:e.jsx(m,{name:l,description:a,children:e.jsx("div",{className:"control",children:e.jsx("input",{className:"input",type:"number",value:o,onChange:s})})})})}const F={order:0,place:0,points:{total:0,tele:0,jury:0,penalty:0},participated:!1,attended:!1,shouldveVoted:!1,failedToVote:!1};function L({data:l,setData:a,users:o}){const n=Q.map(s=>l.shows.find(t=>t.id===s)||{id:s,...F});function i(s,t,r){l.shows.find(d=>d.id===s)?a("shows",l.shows.map(d=>d.id!==s?d:{...d,[t]:r})):a("shows",[...l.shows,{id:s,...F,[t]:r}])}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"box",children:[e.jsx("h2",{children:"The Basics"}),e.jsx(S,{name:"Song",description:"The song that represented this entry. Separate artists with commas (,)",value:l.song,setValue:s=>a("song",s)}),e.jsx("hr",{}),e.jsx(I,{name:"Country",description:"The country being represented",value:l.country,setValue:s=>a("country",s)}),e.jsx("hr",{}),e.jsx(b,{name:"Heads Of Delegation",description:"People who were chosen as the 'Participants'",value:l.hods,setValue:s=>a("hods",s),users:o,multiple:!0}),e.jsx("hr",{}),e.jsx(b,{name:"Performers",description:"People who performed on stage",value:l.performers,setValue:s=>a("performers",s),users:o,multiple:!0}),e.jsx("hr",{}),e.jsx(b,{name:"Delegation Members",description:"Other delegation members",value:l.delegationMembers,setValue:s=>a("delegationMembers",s),users:o,multiple:!0})]}),n.map(s=>e.jsxs("div",{className:"box",children:[e.jsx("h1",{children:W[s.id]}),e.jsx(j,{label:"Took part in this show?",checked:s.participated,onChange:t=>i(s.id,"participated",t)}),s.participated&&e.jsxs("div",{children:[e.jsx(j,{label:"Attended the show?",checked:s.attended,onChange:t=>i(s.id,"attended",t)}),e.jsx("br",{}),s.id==="gf"?e.jsx(j,{label:"Won?",checked:s.won,onChange:t=>i(s.id,"won",t)}):e.jsx(j,{label:"Qualified?",checked:s.qualified,onChange:t=>i(s.id,"qualified",t)}),e.jsxs("div",{className:"field is-grouped mt-2",children:[e.jsx(f,{name:"Running Order",value:s.order,setValue:t=>i(s.id,"order",t),margin:!0}),e.jsx(f,{name:"Place",value:s.place,setValue:t=>i(s.id,"place",t),margin:!0})]}),e.jsxs("div",{className:"field is-grouped mt-2",children:[e.jsx(f,{name:"Total Points",value:s.points.total,setValue:t=>i(s.id,"points",{...s.points,total:t}),margin:!0}),e.jsx(f,{name:"Jury Points",value:s.points.jury,setValue:t=>i(s.id,"points",{...s.points,jury:t}),margin:!0}),e.jsx(f,{name:"Tele Points",value:s.points.tele,setValue:t=>i(s.id,"points",{...s.points,tele:t}),margin:!0}),e.jsx(f,{name:"Penalty Points",value:s.points.penalty,setValue:t=>i(s.id,"points",{...s.points,penalty:t}),margin:!0})]})]}),e.jsx("hr",{}),e.jsx(j,{label:"Was supposed to vote in this show?",value:s.shouldveVoted,onChange:t=>i(s.id,"shouldveVoted",t)}),s.shouldveVoted&&e.jsx("div",{children:e.jsx(j,{label:"Failed to vote?",value:s.failedToVote,onChange:t=>i(s.id,"failedToVote",t)})})]},s.id))]})}const D={country:"",hods:[],performers:[],song:{artists:[],title:"",link:""},shows:[]};function me({data:l,setValue:a,users:o}){const n=localStorage.getItem("backup-entry"),[i,s]=x.useState(JSON.parse(n)||D);function t(){a("entries",[...l.entries,i]),s(D)}return x.useEffect(()=>{localStorage.setItem("backup-entry",JSON.stringify(i))},[i]),e.jsxs("div",{children:[e.jsx(L,{data:i,setData:(r,d)=>s({...i,[r]:d}),users:o,fullData:l}),e.jsx("div",{className:"box",children:e.jsx(h,{onClick:t,children:"Add Entry"})})]})}function xe({data:l,setValue:a,users:o}){const[n,i]=x.useState(0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"box",children:e.jsx(A,{name:"Select an entry to edit",value:n,setValue:i,values:l.entries.map((s,t)=>({value:t,label:Y(s.country)}))})}),l.entries.length>0&&e.jsx(L,{data:l.entries[n],users:o,fullData:l,setData:(s,t)=>a("entries",l.entries.map((r,d)=>d!=n?r:{...r,[s]:t}))})]})}function ue({data:l,setValue:a,users:o}){const[n,i]=x.useState("edit");return e.jsxs("div",{children:[e.jsx("div",{className:"box",children:e.jsx("div",{className:"tabs is-centered",children:e.jsxs("ul",{children:[e.jsx("li",{className:n==="edit"?"is-active":"",children:e.jsx("a",{onClick:()=>i("edit"),children:"Edit Entry"})}),e.jsx("li",{className:n==="new"?"is-active":"",children:e.jsx("a",{onClick:()=>i("new"),children:"New Entry"})})]})})}),e.jsxs(E,{FallbackComponent:T,children:[n==="new"&&e.jsx(me,{data:l,setValue:a,users:o}),n==="edit"&&e.jsx(xe,{data:l,setValue:a,users:o})]})]})}function Ee({initialData:l,name:a,initialUsers:o}){const[n,i]=x.useState(l),[s,t]=x.useState("Info"),[r,d]=x.useState(o||[]),[c,p]=x.useState([]);x.useEffect(()=>{o||R().then(u=>d(u))},[o]),x.useEffect(()=>{U().then(u=>p(u))},[]);function v(u,V){i({...n,[u]:V})}x.useEffect(()=>{localStorage.setItem("backup-edition",JSON.stringify(n))},[n]);const B=[{name:"Info",component:e.jsx($,{})},{name:"Basic Information",component:e.jsx(le,{data:n,setValue:v,users:r,broadcasters:c})},{name:"Location",component:e.jsx(oe,{data:n,setValue:v})},{name:"Shows",component:e.jsx(he,{data:n,setValue:v})},{name:"SF Draw",component:e.jsx(de,{data:n,setValue:v})},{name:"Entries",component:e.jsx(ue,{data:n,setValue:v,users:r})},{name:"Media",component:e.jsx(re,{data:n,setValue:v})},{name:"Output",component:e.jsx(ae,{data:n,users:r,broadcasters:c})},{name:"|",component:e.jsx(J,{})},{name:"Users Editor",component:e.jsx(X,{users:r,setUsers:d})},{name:"Broadcasters Editor",component:e.jsx(ee,{broadcasters:c,setBroadcasters:p,users:r,embedded:!0})}];return e.jsxs("div",{children:[e.jsxs("h1",{children:["Editing Edition File - ",a]}),e.jsx("div",{className:"tabs is-centered is-boxed",children:e.jsx("ul",{className:"ml-0",children:B.map(u=>e.jsx("li",{className:s===u.name?"is-active":"",children:e.jsx("a",{onClick:()=>u.name!=="|"&&t(u.name),children:u.name})},u.name))})}),e.jsx(E,{FallbackComponent:T,children:B.find(u=>u.name===s).component})]})}export{Ee as E};
